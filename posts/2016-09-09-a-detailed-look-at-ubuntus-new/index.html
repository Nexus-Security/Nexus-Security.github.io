<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="119 with 50 posters participating, including story author
Yesterday brought exciting news on the ZFS and Ubuntu fronts‚Äîexperimental ZFS root support in the installer for Ubuntu&amp;rsquo;s upcoming interim release, Eoan Ermine. The feature appeared in the 2019-10-09 daily build of Eoan‚Äîit&amp;rsquo;s not in the regular beta release and, in fact, wasn&amp;rsquo;t even in the &amp;ldquo;current daily&amp;rdquo; when we first went to download it. It&amp;rsquo;s that new! (Readers wanting to play with the new functionality can find it in¬†today&amp;rsquo;s daily build, available here."><title>A detailed look at Ubuntu‚Äôs new experimental ZFS installer</title><link rel=canonical href=https://Nexus-Security.github.io/posts/2016-09-09-a-detailed-look-at-ubuntus-new/><link rel=stylesheet href=/scss/style.min.450926226e724574a6b936335ea06111f8aeb253d932c86cb2cc807341cd2889.css><meta property="og:title" content="A detailed look at Ubuntu‚Äôs new experimental ZFS installer"><meta property="og:description" content="119 with 50 posters participating, including story author
Yesterday brought exciting news on the ZFS and Ubuntu fronts‚Äîexperimental ZFS root support in the installer for Ubuntu&amp;rsquo;s upcoming interim release, Eoan Ermine. The feature appeared in the 2019-10-09 daily build of Eoan‚Äîit&amp;rsquo;s not in the regular beta release and, in fact, wasn&amp;rsquo;t even in the &amp;ldquo;current daily&amp;rdquo; when we first went to download it. It&amp;rsquo;s that new! (Readers wanting to play with the new functionality can find it in¬†today&amp;rsquo;s daily build, available here."><meta property="og:url" content="https://Nexus-Security.github.io/posts/2016-09-09-a-detailed-look-at-ubuntus-new/"><meta property="og:site_name" content="ZYChimne"><meta property="og:type" content="article"><meta property="article:section" content="Posts"><meta property="article:published_time" content="2019-10-15T10:19:00+01:00"><meta property="article:modified_time" content="2019-10-15T10:19:00+01:00"><meta name=twitter:title content="A detailed look at Ubuntu‚Äôs new experimental ZFS installer"><meta name=twitter:description content="119 with 50 posters participating, including story author
Yesterday brought exciting news on the ZFS and Ubuntu fronts‚Äîexperimental ZFS root support in the installer for Ubuntu&amp;rsquo;s upcoming interim release, Eoan Ermine. The feature appeared in the 2019-10-09 daily build of Eoan‚Äîit&amp;rsquo;s not in the regular beta release and, in fact, wasn&amp;rsquo;t even in the &amp;ldquo;current daily&amp;rdquo; when we first went to download it. It&amp;rsquo;s that new! (Readers wanting to play with the new functionality can find it in¬†today&amp;rsquo;s daily build, available here."></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu8b78332b6420dc9affabe23720d11e63_1937019_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>üçá</span></figure><div class=site-meta><h1 class=site-name><a href=/>ZYChimne</a></h1><h2 class=site-description>Computer Science, Wuhan University</h2></div></header><ol class=social-menu><li><a href=https://github.com/ZYChimne target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/ZChimne target=_blank title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/about-me/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About Me</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/posts/2016-09-09-a-detailed-look-at-ubuntus-new/>A detailed look at Ubuntu‚Äôs new experimental ZFS installer</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Oct 15, 2019</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>10 minute read</time></div></footer></div></header><section class=article-content><p><img src=https://cdn.arstechnica.net/wp-content/uploads/2019/10/eoan-install-4-760x380.png loading=lazy></p><p><a class=link href="https://arstechnica.com/information-technology/2019/10/a-detailed-look-at-ubuntus-new-experimental-zfs-installer/?comments=1" title="50 posters participating, including story author" target=_blank rel=noopener>119 with 50 posters participating, including story author</a></p><p>Yesterday brought exciting news on the ZFS and Ubuntu fronts‚Äîexperimental ZFS root support in the installer for Ubuntu&rsquo;s upcoming interim release, Eoan Ermine. The feature <a class=link href=https://twitter.com/popey/status/1181547646378500096 target=_blank rel=noopener>appeared</a> in the 2019-10-09 daily build of Eoan‚Äîit&rsquo;s not in the regular beta release and, in fact, wasn&rsquo;t even in the &ldquo;current daily&rdquo; when we first went to download it. It&rsquo;s that new! (Readers wanting to play with the new functionality can find it in¬†<em>today&rsquo;s</em> daily build, available <a class=link href=http://cdimage.ubuntu.com/daily-live/current/ target=_blank rel=noopener>here</a>.)</p><ul><li><p>Time to install the 2019-10-09 daily build of Eoan Ermine on a fresh new VM!</p><p>Jim Salter</p></li><li><p>Our first choice during the Eoan install is a basic one. Yeah yeah yeah, let&rsquo;s get to the ZFS please&mldr;</p><p>Jim Salter</p></li><li><p>WHEEEE! Now that we&rsquo;ve got the correct daily build .iso, we have the experimental ZFS install option available.</p><p>Jim Salter</p></li><li><p>Minor bug: even though we chose a ZFS root, Eoan&rsquo;s installer is still telling us it will use ext4. Welcome to alpha software!</p><p>Jim Salter</p></li><li><p>Now that we&rsquo;ve selected our ZFS root, Eoan Ermine is on its merry way to installation.</p><p>Jim Salter</p></li></ul><h2 id=for-the-zfs-newbies>For the ZFS newbies</h2><p>If you&rsquo;re new to the <a class=link href=https://arstechnica.com/information-technology/2014/02/ars-walkthrough-using-the-zfs-next-gen-filesystem-on-linux/ target=_blank rel=noopener>ZFS</a> hype train, you might wonder why a new filesystem option in an OS installer is a big deal. So here&rsquo;s a quick explanation: ZFS is a copy-on-write filesystem, which can take <a class=link href=https://arstechnica.com/information-technology/2014/01/bitrot-and-atomic-cows-inside-next-gen-filesystems/ target=_blank rel=noopener>atomic snapshots</a>¬†of entire filesystems. This looks like sheer magic if you&rsquo;re not used to it‚Äîa snapshot of a 10TB filesystem can be taken instantly without interrupting any system process in the slightest. Once the snapshot is taken, it&rsquo;s an immutable record of the exact, block-for-block condition of the filesystem at the moment in time the snapshot was taken.</p><p>When a snapshot is first taken, it consumes no additional disk space. As time goes by and changes are made to the filesystem, the space required to keep the snapshot grows by the amount of data that has been deleted or altered. So let&rsquo;s say you snapshot a 10TB filesystem: the snapshot completes instantly, requiring no additional room. Then you delete a 5MB JPEG file‚Äînow the snapshot consumes 5MB of disk space, because it still has the JPEG¬†you deleted. Then you change 5MB of data in a database, and the snapshot takes 10MB‚Äî5MB for the JPEG¬†you deleted and another 5MB for the data that you altered in the database.</p><p>That&rsquo;s just one awesome ZFS feature. There&rsquo;s also the ability to manage multiple disks in a native RAID-like system, inline compression with selectable algorithms, rapid asynchronous incremental <a class=link href=https://arstechnica.com/information-technology/2015/12/rsync-net-zfs-replication-to-the-cloud-is-finally-here-and-its-fast/ target=_blank rel=noopener>replication</a>, and more. But we&rsquo;re going to focus mostly on the snapshots here, because one¬†<em>other</em> thing you can do with a snapshot is roll it back.</p><ul><li><p>A simple test of undoing an operation: first, take a snapshot. Then, do something you regret (in this case, uninstalling Firefox).</p><p>Jim Salter</p></li><li><p>The rollback is instantaneous, and Firefox is back‚Äîbut things still look a little wonky due to orphaned filehandles. We need to reboot now.</p><p>Jim Salter</p></li><li><p>We rolled back, we rebooted, and everything&rsquo;s golden. Hello again, Firefox old friend!</p><p>Jim Salter</p></li></ul><p>Although there isn&rsquo;t any support built into Eoan&rsquo;s apt package manager for automatically taking snapshots yet, we can demonstrate a snapshot‚Äîoops‚Äîrollback moment manually. In the above gallery, first we take a ZFS snapshot. Eoan has split our root filesystem into tons of little datasets (more on that later), so we use the <code>-r</code> option for <code>zfs snapshot</code> to recursively take snapshots throughout the entire tree.</p><p>Now that we&rsquo;ve insured ourselves against mistakes, we do something we&rsquo;re going to regret. For the purposes of this demo, we&rsquo;re just removing Firefox‚Äîbut we could really recover from anything up to and including an <code>rm -rf --no-preserve-root /</code> this way with a little extra legwork. After removing Firefox, we need to roll back our snapshots to restore the system to its original condition.</p><p>Since the root filesystem is scattered through a¬†<em>bunch</em> of individual datasets, we need to roll them all back individually. Although this is a pain for the casual user without additional tooling, it does make it possible to do more granular restore operations if we&rsquo;re feeling picky‚Äîlike rolling back the root filesystem without rolling back <code>/home</code>. Ubuntu will undoubtedly eventually have tooling to make this easier, but for the moment, we do a bit of sysadmin-fu and pipe <code>zfs list</code> to <code>grep</code> to <code>awk</code> to <code>xargs</code>, oh my.</p><p>The command line acrobatics might have been obnoxious, but the rollback itself was instantaneous, and Firefox has returned. It still doesn&rsquo;t work quite right, though, due to <a class=link href=https://unix.stackexchange.com/questions/290116/what-is-an-orphaned-inode/290119#290119 target=_blank rel=noopener>orphaned filehandles</a>‚Äîwe rolled back a live mounted root filesystem, which is kind of a cowboy thing to do. To make things entirely right, a reboot is necessary‚Äîbut after the reboot, everything&rsquo;s the way it once was, and without the need to wait through any lengthy Windows Restore Point-style <a class=link href=http://catb.org/jargon/html/G/grovel.html target=_blank rel=noopener>groveling</a> over the filesystem.</p><h2 id=for-the-zfs-enthusiasts>For the ZFS enthusiasts</h2><p>In this section, we&rsquo;re going to take a detailed look at just how Ubuntu is carving up the filesystems in Eoan&rsquo;s experimental installer. The version in our daily build is 0.8.1, so this is great news for the ZFS fans among us, even without the experimental root installer‚Äîassuming the final version of Eoan follows this one, we&rsquo;ll get native encryption, TRIM, device removal, and zpool checkpoints. These <a class=link href=https://arstechnica.com/gadgets/2019/06/zfs-features-bugfixes-0-8-1/ target=_blank rel=noopener>features</a> have been in the ZFS on Linux <a class=link href=https://github.com/zfsonlinux/zfs target=_blank rel=noopener>master</a> since 0.8, but this is the first time they&rsquo;ve shown up in Ubuntu&rsquo;s native ZFS.</p><ul><li><p>A peek at /dev/vda&rsquo;s partition table shows us a small UEFI boot partition, a 2G partition for bpool, and the remainder of the disk as rpool.</p><p>Jim Salter</p></li><li><p>Eoan&rsquo;s experimental ZFS installer creates two zpools, rpool and bpool. Bpool contains boot files only; all the interesting stuff is in rpool, shown here.</p><p>Jim Salter</p></li><li><p>Taking a look at the ZFS dataset properties of my home directory, as set by the installer.</p><p>Jim Salter</p></li></ul><p>So far‚Äîremember, this is alpha software in a daily build‚Äîthe installer doesn&rsquo;t give you any control over how it carves up the disk when you select a ZFS install; it just does what it wants to do. The Eoan VM I created has a single 20GB virtual disk. Eoan&rsquo;s installer carved this into one primary partition and two logical‚Äîa small UEFI boot partition and partitions for two separate ZFS storage pools, named <code>bpool</code> and <code>rpool</code>.</p><p>Bpool is pretty boring; it&rsquo;s just where the system&rsquo;s /boot directory gets mounted. Eoan made this pool 2GB, which is twice what a conservative <code>/boot</code> is normally provisioned to; this is probably to allow headroom to maintain a fairly deep archive of snapshots in the future. <code>rpool</code> gets all the remaining disk space after the UEFI and <code>bpool</code> partitions are created; it&rsquo;s where all the fun stuff goes, including your root filesystem, home directory, and so forth.</p><p>Beneath <code>rpool</code>, you&rsquo;ll find a pretty bewildering array of small datasets, all of which correspond to particular vital areas in what would normally be a single root filesystem. This appears to us to be an inherited BSD-ism‚Äîmost Linux distributions left the concept of heavily partitioned disks with multiple filesystems behind twenty years ago, but FreeBSD‚Äîwhich has had root ZFS options in its installer for many years now‚Äîwas a lot more stubborn about it.</p><p>The good thing about carving up the root filesystem into so many separate datasets is that you can snapshot and roll them back individually. In some cases, this is great‚Äîthere&rsquo;s an obvious, clear, and useful distinction between rolling back the root filesystem as a whole and rolling back your own home directory, for example. Most users‚Äîeven pretty competent sysadmin types‚Äîwill be a lot more confused about how and why you might want to roll back <code>/usr</code> without rolling back, say, <code>/var/lib/AccountServices</code>, though. It&rsquo;s nice that you¬†<em>can</em> if you really want to, but we&rsquo;re not so sure the capability outweighs the utility of a simpler approach.</p><ul><li><p>Have I mentioned that this is a daily build, and therefore alpha software? It&rsquo;s a daily build, and therefore alpha software. Both bpool itself and the boot dataset beneath it have /boot as a mountpoint. Oops. =)</p><p>Jim Salter</p></li><li><p>Taking a look at the ZFS dataset properties of my home directory, as set by the installer.</p><p>Jim Salter</p></li><li><p>Eoan&rsquo;s ZFS support doesn&rsquo;t yet include automatically creating new ZFS datasets for new user accounts&rsquo; homedirs.</p><p>Jim Salter</p></li><li><p>A peek into root&rsquo;s crontab and the jobs in /etc/cron.* show that no automatic snapshot creation is present in Eoan&rsquo;s ZFS support yet; only an automatic scrub once monthly.</p><p>Jim Salter</p></li></ul><p>Peeking a little deeper, we can see that Eoan isn&rsquo;t setting any significant per-dataset properties on all these separate datasets. It is setting compression=lz4 on across the entire pool, though. This is a good thing‚Äîmany people worry that compressed filesystems are slow filesystems, but LZ4 stream compression is so lightweight that it&rsquo;s effectively &ldquo;free.&rdquo; We&rsquo;ve done extensive testing across years of ZFS experience and have never seen a situation where LZ4 wasn&rsquo;t a good idea. Even a $50 tinkertoy APU from several years ago can compress and decompress LZ4 faster than a pair of fast SSDs can keep up, with no significant CPU utilization.</p><p>We did spot a bug pretty quickly while looking over the pools and datasets. Both <code>bpool</code> itself and <code>bpool/BOOT/ubuntu_oalrlu</code> (we think the string of random-seeming characters is intended to be a unique system identifier) have <code>/boot</code> set as their mountpoint. This clearly isn&rsquo;t causing any significant problems right now, and we&rsquo;re sure it will get ironed out well before Eoan goes live. (<strong>Edit:</strong>¬†a Canonical core admin <a class=link href=https://twitter.com/didrocks/status/1182329263913082880 target=_blank rel=noopener>clarified</a>¬†that this is not a bug;¬†<code>bpool</code> is set¬†<code>canmount=no</code>. The reason for¬†<code>bpool</code>&rsquo;s unmountable mountpoint is so that any new datasets created under¬†<code>bpool</code>¬†will automatically mount at¬†<code>/boot/newdataset</code>, not at¬†<code>/bpool/newdataset.)</code></p><p>Although Eoan created datasets automatically for both my real user account homedir and root&rsquo;s, the <code>adduser</code> command didn&rsquo;t create one for a new test user. This is something we also expect to get ironed out reasonably quickly‚Äîeven if <code>adduser</code> itself never takes those steps, the GUI for adding new users likely will, if it doesn&rsquo;t already. This is also pretty simple to do manually; in the above example, where new user test is¬†<em>not</em> logged in, we could upgrade test to a zfs dataset homedir like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>root@eoan:~$ zfs create rpool/ROOT/ubuntu\_oal4lu/test\_twm547  
</span></span><span class=line><span class=cl> root@eoan:~$ rsync -ha /home/test/ /rpool/ROOT/ubuntu\_oal4lu/test\_twm547/  
</span></span><span class=line><span class=cl> root@eoan:~$ rm -r /home/test  
</span></span><span class=line><span class=cl> root@eoan:~$ chown test.test /rpool/ROOT/ubuntu\_oal4lu/test\_twm547  
</span></span><span class=line><span class=cl> root@eoan:~$ zfs set mountpoint=/home/test rpool/ROOT/ubuntu\_oal4lu/test\_twm547  
</span></span><span class=line><span class=cl> root@eoan:~$ zfs mount rpool/ROOT/ubuntu\_oal4lu/test\_twm547
</span></span></code></pre></td></tr></table></div></div><p>&mldr; and that would be that.</p><p>The next big thing we looked for was a mechanism for automatically taking snapshots. You can&rsquo;t roll back to a snapshot you never took, so a safe ZFS system should automatically take snapshots pretty regularly. There&rsquo;s nothing in Eoan to take snapshots for you yet‚Äîthe only cron job is the standard one that scrubs the pool once per month‚Äîbut there are a few general purpose ZFS snapshot orchestration tools readily available; these include <a class=link href=https://manpages.ubuntu.com/manpages/bionic/man8/zfs-auto-snapshot.8.html target=_blank rel=noopener>zfs-auto-snapshot</a>¬†and my own <a class=link href=https://github.com/jimsalterjrs/sanoid target=_blank rel=noopener>sanoid</a>.</p><h2 id=alpha-software-is-alpha>Alpha software is alpha!</h2><p>In conclusion, we want to remind readers that while ZFS itself is very stable, Ubuntu&rsquo;s ZFS-enabled installer and use of it as a root filesystem are still¬†<em>alpha</em> quality. We do not recommend that you attempt to use the new ZFS installer on systems you care deeply about until the installer makes it past alpha, past beta, and all the way to full release quality. This also means you should be kind about any bugs you find playing with it in the meantime‚Äîagain, this is¬†<em>alpha</em> software and bugs are not only possible, they&rsquo;re to be expected.</p><p>With all that said, we&rsquo;re extremely excited about ZFS on root making visible progress in Ubuntu‚Äîand we hope these features and more will make it into Eoan Ermine&rsquo;s expected end-of-the-month release.</p><p><em>Listing image by Jim Salter</em></p><p>from Hacker News <a class=link href=https://ift.tt/35hHV7z target=_blank rel=noopener>https://ift.tt/35hHV7z</a></p></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><footer class=site-footer><section class=copyright>&copy;
2020 -
2022 ZYChimne</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.11.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#for-the-zfs-newbies>For the ZFS newbies</a></li><li><a href=#for-the-zfs-enthusiasts>For the ZFS enthusiasts</a></li><li><a href=#alpha-software-is-alpha>Alpha software is alpha!</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>