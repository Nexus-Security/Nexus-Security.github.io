<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="ConsoleGUI ConsoleGUI is a simple .NET framework for creating console-based GUI applications.
It provides most essential layout management utilities as well as a set of basic controls.
The example above is not really a playable chess game. The board on the left is simply just a grid with some text in it - it&amp;rsquo;s here for display purposes only. But of course, with a little bit of code behind, it could be made interactive."><title>A GUI framework for C# console applications</title><link rel=canonical href=https://Nexus-Security.github.io/posts/2016-09-09-a-gui-framework-for-c-console/><link rel=stylesheet href=/scss/style.min.450926226e724574a6b936335ea06111f8aeb253d932c86cb2cc807341cd2889.css><meta property="og:title" content="A GUI framework for C# console applications"><meta property="og:description" content="ConsoleGUI ConsoleGUI is a simple .NET framework for creating console-based GUI applications.
It provides most essential layout management utilities as well as a set of basic controls.
The example above is not really a playable chess game. The board on the left is simply just a grid with some text in it - it&amp;rsquo;s here for display purposes only. But of course, with a little bit of code behind, it could be made interactive."><meta property="og:url" content="https://Nexus-Security.github.io/posts/2016-09-09-a-gui-framework-for-c-console/"><meta property="og:site_name" content="ZYChimne"><meta property="og:type" content="article"><meta property="article:section" content="Posts"><meta property="article:published_time" content="2019-10-29T03:17:00+01:00"><meta property="article:modified_time" content="2019-10-29T03:17:00+01:00"><meta name=twitter:title content="A GUI framework for C# console applications"><meta name=twitter:description content="ConsoleGUI ConsoleGUI is a simple .NET framework for creating console-based GUI applications.
It provides most essential layout management utilities as well as a set of basic controls.
The example above is not really a playable chess game. The board on the left is simply just a grid with some text in it - it&amp;rsquo;s here for display purposes only. But of course, with a little bit of code behind, it could be made interactive."></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu8b78332b6420dc9affabe23720d11e63_1937019_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>üçá</span></figure><div class=site-meta><h1 class=site-name><a href=/>ZYChimne</a></h1><h2 class=site-description>Computer Science, Wuhan University</h2></div></header><ol class=social-menu><li><a href=https://github.com/ZYChimne target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/ZChimne target=_blank title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/about-me/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About Me</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/posts/2016-09-09-a-gui-framework-for-c-console/>A GUI framework for C# console applications</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Oct 29, 2019</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>10 minute read</time></div></footer></div></header><section class=article-content><h1 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkconsoleguiconsolegui><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#consolegui target=_blank rel=noopener></a>ConsoleGUI</h1><p>ConsoleGUI is a simple .NET framework for creating console-based GUI applications.</p><p>It provides most essential layout management utilities as well as a set of basic controls.</p><p><a class=link href="https://github.com/TomaszRewak/C-sharp-console-gui-framework/blob/master/Resources/example.png?raw=true" target=_blank rel=noopener><img src="https://github.com/TomaszRewak/C-sharp-console-gui-framework/raw/master/Resources/example.png?raw=true" loading=lazy></a></p><p><em>The example above is not really a playable chess game. The board on the left is simply just a grid with some text in it - it&rsquo;s here for display purposes only. But of course, with a little bit of code behind, it could be made interactive.</em></p><h4 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkmotivationmotivation><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#motivation target=_blank rel=noopener></a>Motivation</h4><p>What sets this library apart from other projects that provide similar functionalities, is the fact that the ConsoleGUI framework is fully layout-driven. In this regard it‚Äôs more like WPF or HTML, than for example Windows Forms. You don‚Äôt specify exact coordinates at which a given control should reside, but rather let stack panels, dock panels and other layout managers do their work. I don‚Äôt claim it‚Äôs THE right way of doing things, it‚Äôs just what my background is.</p><p>More details about this project (as well as a glimpse at the working example) can be found in this video: <a class=link href=https://youtu.be/YIrmjENTaaU target=_blank rel=noopener>https://youtu.be/YIrmjENTaaU</a></p><h2 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworksetupsetup><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#setup target=_blank rel=noopener></a>Setup</h2><p>First install the NuGet package:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>dotnet</span> <span class=nx>add</span> <span class=kn>package</span> <span class=nx>ConsoleGUI</span>
</span></span></code></pre></td></tr></table></div></div><p>then include required namespaces in your code:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>using ConsoleGUI; using ConsoleGUI.Controls; using ConsoleGUI.Space;
</span></span></code></pre></td></tr></table></div></div><p>and finally setup the <code>ConsoleManager</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// optional: adjusts the buffer size and sets the output encoding to the UTF8 ConsoleManager.Setup(); // optional: resizes the console window (the size is set in a number of characters, not pixels) ConsoleManager.Resize(new Size(150, 40)); // required for terminals that don&#39;t support true color formatting (e.g. powershell.exe) ConsoleManager.CompatibilityMode \= true; // sets the main layout element and prints it on the screen ConsoleManager.Content \= new TextBlock { Text \= &#34;Hello world&#34; };
</span></span></code></pre></td></tr></table></div></div><p>And that&rsquo;s it. As you can see most of those steps are optional, depending on how you want to configure your window.</p><p>After that, whenever you make a change to any of the controls within the UI tree, the updates will be propagated and displayed automatically. No manual <code>Redraw()</code> calls are required.</p><h4 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkcompatibility-modecompatibility-mode><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#compatibility-mode target=_blank rel=noopener></a>Compatibility mode</h4><p>The above example uses the compatibility mode. It&rsquo;s required if your terminal of choice doesn&rsquo;t support true color formatting. If set, the ConsoleGUI will translate all of the RGB colors into 4bit values of the ConsoleColor enum. This will, of course, degrade the user experience.</p><p>Terminals that DO NOT support the true color formatting are (for example): powershell.exe and cmd.exe.</p><p>Terminals that DO support the true color formatting are (for example): the new Windows Terminal and the terminal that is built in into the VS.</p><h4 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkresponsivenessresponsiveness><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#responsiveness target=_blank rel=noopener></a>Responsiveness</h4><p>If the window size is not set explicitly, the layout will be adjusted to the current size of that window. It&rsquo;s important to note that this framework doesn&rsquo;t detect terminal size changes automatically. If the user resizes the window manually, the layout will become broken.</p><p>To readjust the layout to the manually updated window size, call the <code>ConsoleManager.Setup()</code> method. Just remember that it might take more time to repaint the entire screen then to draw a single update (as the entire buffer must be invalidated), so do it only if the size of the window has actually changed.</p><h2 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkbasic-controlsbasic-controls><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#basic-controls target=_blank rel=noopener></a>Basic controls</h2><p>This is a list of all available controls:</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkbackgroundbackground><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#background target=_blank rel=noopener></a>Background</h5><p>Sets the background color of the <code>Content</code> control. If the <code>Important</code> property is set, the background color will be updated even if the stored control already sets its own background color.</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkborderborder><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#border target=_blank rel=noopener></a>Border</h5><p>Draws a border around the <code>Content</code> control. The <code>BorderPlacement</code> and the <code>BorderStyle</code> can be adjusted to change the look of the generated outline.</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkboundaryboundary><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#boundary target=_blank rel=noopener></a>Boundary</h5><p>Allows the user to modify the <code>MinWidth</code>, <code>MinHeight</code>, <code>MaxWidth</code> and <code>MaxHeight</code> of the <code>Content</code> control in relation to its parent control.</p><p>Especially useful to limit the space taken by controls that would otherwise stretch to fill all of the available space (like when storing a <code>HorizontalStackPanel</code> within a horizontal <code>DockPanel</code>)</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkboxbox><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#box target=_blank rel=noopener></a>Box</h5><p>Aligns the <code>Content</code> control vertically (<code>Top</code>/<code>Center</code>/<code>Bottom</code>/<code>Stretch</code>) and horizontally (<code>Left</code>/<code>Center</code>/<code>Right</code>/<code>Stretch</code>).</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkcanvascanvas><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#canvas target=_blank rel=noopener></a>Canvas</h5><p>Can host multiple child controls, each displayed within a specified rectangle. Allows content overlapping.</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkdatagriddatagrid><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#datagrid target=_blank rel=noopener></a>DataGrid</h5><p>Displays <code>Data</code> in a grid based on provided column definitions.</p><p>The <code>ColumnDefinition</code> defines the column <code>Header</code>, its <code>Width</code> and the data <code>Selector</code>. The <code>Selector</code> can be used to extract a text from a data row, specify that cell&rsquo;s color, or even define a custom content generator.</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkdockpaneldockpanel><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#dockpanel target=_blank rel=noopener></a>DockPanel</h5><p><code>DockPanel</code> consists of two parts: <code>DockedControl</code> and <code>FillingControl</code>. The <code>DockedControl</code> is placed within the available space according to the <code>Placement</code> property value (<code>Top</code>/<code>Right</code>/<code>Bottom</code>/<code>Left</code>). The <code>FillingControl</code> takes up all of the remaining space.</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkgridgrid><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#grid target=_blank rel=noopener></a>Grid</h5><p>Splits the available space into smaller pieces according to the provided <code>Columns</code> and <code>Rows</code> definitions. Each cell can store up to one child control.</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkhorizontalseparatorhorizontalseparator><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#horizontalseparator target=_blank rel=noopener></a>HorizontalSeparator</h5><p>Draws a horizontal line.</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkhorizontalstackpanelhorizontalstackpanel><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#horizontalstackpanel target=_blank rel=noopener></a>HorizontalStackPanel</h5><p>Stacks multiple controls horizontally.</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkmarginmargin><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#margin target=_blank rel=noopener></a>Margin</h5><p>Adds the <code>Offset</code> around the <code>Content</code> control when displaying it. It affects both the <code>MinSize</code> and the <code>MaxSize</code> of the <code>IDrawingContext</code>.</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkoverlayoverlay><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#overlay target=_blank rel=noopener></a>Overlay</h5><p>Allows two controls to be displayed on top of each other. Unlike the <code>Canvas</code>, it uses its own size when specifying size limits for child controls.</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkstylestyle><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#style target=_blank rel=noopener></a>Style</h5><p>Modifies the <code>Background</code> and the <code>Foreground</code> colors of its <code>Content</code>.</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworktextblocktextblock><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#textblock target=_blank rel=noopener></a>TextBlock</h5><p>Displays a single line of text.</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworktextboxtextbox><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#textbox target=_blank rel=noopener></a>TextBox</h5><p>An input control. Allows the user to insert a single line of text.</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkverticalscrollpanelverticalscrollpanel><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#verticalscrollpanel target=_blank rel=noopener></a>VerticalScrollPanel</h5><p>Allows its <code>Content</code> to expand infinitely in the vertical dimension and displays only the part of it that is currently in view. The <code>ScrollBarForeground</code> and the <code>ScrollBarBackground</code> can be modified to adjust the look of the scroll bar.</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkverticalseparatorverticalseparator><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#verticalseparator target=_blank rel=noopener></a>VerticalSeparator</h5><p>Draws a vertical line.</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkverticalstackpanelverticalstackpanel><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#verticalstackpanel target=_blank rel=noopener></a>VerticalStackPanel</h5><p>Stacks multiple controls vertically.</p><h5 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkwrappanelwrappanel><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#wrappanel target=_blank rel=noopener></a>WrapPanel</h5><p>Breaks a single line of text into multiple lines based on the available vertical space. It can be used with any type of a control (<code>TextBox</code>, <code>TextBlock</code> but also <code>HorizontalStackPanel</code> and any other).</p><h2 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkcreating-custom-controlscreating-custom-controls><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#creating-custom-controls target=_blank rel=noopener></a>Creating custom controls</h2><p>The set of predefined control is relatively small, but it&rsquo;s very easy to create custom ones. There are two main ways to do it.</p><h4 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkinheriting-the-simplecontrol-classinheriting-the-simplecontrol-class><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#inheriting-the-simplecontrol-class target=_blank rel=noopener></a>Inheriting the <code>SimpleControl</code> class</h4><p>If you want to define a control that is simply composed of other controls (like a text box with a specific background and border), inheriting from the <code>SimpleControl</code> class is the way to go.</p><p>All you have to do is to set the <code>protected</code> <code>Content</code> property with a content that you want to display.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>internal sealed class MyControl : SimpleControl { private readonly TextBlock \_textBlock; public MyControl() { \_textBlock \= new TextBlock(); Content \= new Background { Color \= new Color(200, 200, 100), Content \= new Border { Content \= \_textBlock } }; } public string Text { get \=&gt; \_textBlock.Text; set \=&gt; \_textBlock.Text \= value; } }
</span></span></code></pre></td></tr></table></div></div><h4 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkimplementing-the-icontrol-interface-or-inheriting-the-control-classimplementing-the-icontrol-interface-or-inheriting-the-control-class><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#implementing-the-icontrol-interface-or-inheriting-the-control-class target=_blank rel=noopener></a>Implementing the <code>IControl</code> interface or inheriting the <code>Control</code> class</h4><p>This approach can be used to define fully custom controls. All of the basic within this library are implemented this way.</p><p>The <code>IControl</code> interface requires providing 3 members:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public interface IControl { Character this\[Position position\] { get; } Size Size { get; } IDrawingContext Context { get; set; } }
</span></span></code></pre></td></tr></table></div></div><p>The <code>[]</code> operator must return a character that is to be displayed on the specific position. The position is defined relative to this control&rsquo;s space and not to the screen.</p><p>The control can also notify its parent about its internal changes using the provided <code>Context</code>. The <code>IDrawingContext</code> interface is defined as follows:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public interface IDrawingContext { Size MinSize { get; } Size MaxSize { get; } void Redraw(IControl control); void Update(IControl control, in Rect rect); event SizeLimitsChangedHandler SizeLimitsChanged; }
</span></span></code></pre></td></tr></table></div></div><p>If only a part of the control has changed, it should call the <code>Update</code> method, providing a reference to itself and the rect (once again - in its local space) that has to be redrawn. If the <code>Size</code> of the control has changed or the entire control requires redrawing, the control should call the <code>Redraw</code> method of its current <code>Context</code>.</p><p>The <code>Context</code> is also used to notify the child control about changes in size limits imposed on it by its parent. The child control should listen to the <code>SizeLimitsChanged</code> event and update its layout according to the <code>MinSize</code> and <code>MaxSize</code> values of the current <code>Context</code>.</p><p>When defining a custom control that can host other controls, you might have to implement a custom <code>IDrawingContext</code> class.</p><p>Instead of implementing the <code>IControl</code> and <code>IDrawingContext</code> directly, you can also use the <code>Control</code> and <code>DrawingContext</code> base classes. They allow for a similar level of flexibility, at the same time providing more advanced functionalities.</p><p>The <code>DrawingContext</code> is an <code>IDisposable</code> non-abstract class that translates the parent&rsquo;s space into the child&rsquo;s space based on the provided size limits and offset. It also ensures that propagated notifications actually come from the hosted control and not from controls that were previously assigned to a given parent.</p><p>The <code>Control</code> class not only trims all of the incoming and outgoing messages to the current size limits but also allows to temporarily freeze the control so that only a single update message is generated after multiple related changes are performed.</p><p>For more information on how to define custom controls using the <code>IControl</code>/<code>IDrawingContext</code> interfaces or the <code>Control</code>/<code>DrawingContext</code> classes, please see the source code of one of the controls defined within this library.</p><h2 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkinputinput><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#input target=_blank rel=noopener></a>Input</h2><p>As the standard <code>Console</code> class doesn&rsquo;t provide any event-based interface for detecting incoming characters, the availability of input messages has to be checked periodically within the main loop of your application. Of course, it&rsquo;s not required if your layout doesn&rsquo;t contain any interactive components.</p><p>To handle pending input messages, call the <code>ReadInput</code> method of the <code>ConsoleManager</code> class. It accepts a single argument being a collection of <code>IInputListener</code> objects. You can define this collection just once and reuse it - it specifies the list of input elements that are currently active and should be listening to keystrokes. The order of those elements is important, because if one control will set the <code>Handled</code> property of the provided <code>InputEvent</code>, the propagation will be terminated.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>var input \= new IInputListener\[\] { scrollPanel, tabPanel, textBox }; for (int i \= 0; ; i++) { Thread.Sleep(10); ConsoleManager.ReadInput(input); }
</span></span></code></pre></td></tr></table></div></div><p>The <code>IInputListener</code> interface is not only restricted for classes that implement the <code>IControl</code> interface and can be used to define any custom (user defined) controllers that manage application&rsquo;s behavior.</p><h4 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkformsforms><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#forms target=_blank rel=noopener></a>Forms</h4><p>As you might have noticed, there is no general purpose <code>Form</code> control available in this framework. That‚Äôs because it‚Äôs very hard to come up with a design that would fit all needs. Of course such obstacle is not a good reason on its own, but at the same time it‚Äôs extremely easy to implement a tailor made form controller within the target application itself. Here is an example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>class FromController : IInputListener { IInputListener \_currentInput; // ... public void OnInput(InputEvent inputEvent) { if (inputEvent.Key.Key \== ConsoleKey.Tab) { \_currentInput \= // nextInput... inputEvent.Handled \= true; } else { \_currentInput.OnInput(inputEvent) } } }
</span></span></code></pre></td></tr></table></div></div><p>After implementing it, all you have to do is to initialize an instance of this class with a list of you inputs and call the <code>ConsoleManager.ReadInput(fromControllers)</code> each frame.</p><p>The biggest strength of this approach is that you decide what‚Äôs the order of controls within the form, you can do special validation after leaving each input, create a custom layout of the form itself, highlight currently active input, and much, much more. I believe it‚Äôs a good tradeoff.</p><h2 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkmousemouse><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#mouse target=_blank rel=noopener></a>Mouse</h2><p>Currently this library does not mouse input.</p><h2 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkperformanceperformance><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#performance target=_blank rel=noopener></a>Performance</h2><p>This library is designed with high performance applications in mind. It means that if a control requests an <code>Update</code>, only the specified screen rectangle will be recalculated, and only if all of its parent controls agree that this part of the content is actually visible.</p><p>As the most expensive operation of the whole process is printing characters on the screen, the <code>ConsoleManager</code> defines its own, additional buffer. If the requested pixel (character) didn&rsquo;t change, it&rsquo;s not repainted.</p><h2 id=httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkcontributionscontributions><a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#contributions target=_blank rel=noopener></a>Contributions</h2><p>I&rsquo;m open to all sorts of contributions and feedback.</p><p>from Hacker News <a class=link href=https://github.com/TomaszRewak/C-sharp-console-gui-framework target=_blank rel=noopener>https://github.com/TomaszRewak/C-sharp-console-gui-framework</a></p></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><footer class=site-footer><section class=copyright>&copy;
2020 -
2022 ZYChimne</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.11.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><ol><li><ol><li><a href=#httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkmotivationmotivation><a href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#motivation></a>Motivation</a></li></ol></li></ol></li><li><a href=#httpsgithubcomtomaszrewakc-sharp-console-gui-frameworksetupsetup><a href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#setup></a>Setup</a><ol><li><ol><li><a href=#httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkcompatibility-modecompatibility-mode><a href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#compatibility-mode></a>Compatibility mode</a></li><li><a href=#httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkresponsivenessresponsiveness><a href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#responsiveness></a>Responsiveness</a></li></ol></li></ol></li><li><a href=#httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkbasic-controlsbasic-controls><a href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#basic-controls></a>Basic controls</a><ol><li><ol><li></li></ol></li></ol></li><li><a href=#httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkcreating-custom-controlscreating-custom-controls><a href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#creating-custom-controls></a>Creating custom controls</a><ol><li><ol><li><a href=#httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkinheriting-the-simplecontrol-classinheriting-the-simplecontrol-class><a href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#inheriting-the-simplecontrol-class></a>Inheriting the <code>SimpleControl</code> class</a></li><li><a href=#httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkimplementing-the-icontrol-interface-or-inheriting-the-control-classimplementing-the-icontrol-interface-or-inheriting-the-control-class><a href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#implementing-the-icontrol-interface-or-inheriting-the-control-class></a>Implementing the <code>IControl</code> interface or inheriting the <code>Control</code> class</a></li></ol></li></ol></li><li><a href=#httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkinputinput><a href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#input></a>Input</a><ol><li><ol><li><a href=#httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkformsforms><a href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#forms></a>Forms</a></li></ol></li></ol></li><li><a href=#httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkmousemouse><a href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#mouse></a>Mouse</a></li><li><a href=#httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkperformanceperformance><a href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#performance></a>Performance</a></li><li><a href=#httpsgithubcomtomaszrewakc-sharp-console-gui-frameworkcontributionscontributions><a href=https://github.com/TomaszRewak/C-sharp-console-gui-framework#contributions></a>Contributions</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>