<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Your data model has started to stabilize and you&amp;rsquo;re in a position to create a public API for your web app. You realize it&amp;rsquo;s hard to make significant changes to your API once it&amp;rsquo;s released and want to get as much right as possible up front. Now, the internet has no shortage on opinions on API design. But, since there&amp;rsquo;s no one widely adopted standard that works in all cases, you&amp;rsquo;re left with a bunch of choices: What formats should you accept?"><title>Best Practices for Designing a Pragmatic RESTful API</title><link rel=canonical href=https://Nexus-Security.github.io/posts/2016-09-09-best-practices-for-designing-pragmatic/><link rel=stylesheet href=/scss/style.min.450926226e724574a6b936335ea06111f8aeb253d932c86cb2cc807341cd2889.css><meta property="og:title" content="Best Practices for Designing a Pragmatic RESTful API"><meta property="og:description" content="Your data model has started to stabilize and you&amp;rsquo;re in a position to create a public API for your web app. You realize it&amp;rsquo;s hard to make significant changes to your API once it&amp;rsquo;s released and want to get as much right as possible up front. Now, the internet has no shortage on opinions on API design. But, since there&amp;rsquo;s no one widely adopted standard that works in all cases, you&amp;rsquo;re left with a bunch of choices: What formats should you accept?"><meta property="og:url" content="https://Nexus-Security.github.io/posts/2016-09-09-best-practices-for-designing-pragmatic/"><meta property="og:site_name" content="ZYChimne"><meta property="og:type" content="article"><meta property="article:section" content="Posts"><meta property="article:published_time" content="2019-12-15T01:41:00+01:00"><meta property="article:modified_time" content="2019-12-15T01:41:00+01:00"><meta name=twitter:title content="Best Practices for Designing a Pragmatic RESTful API"><meta name=twitter:description content="Your data model has started to stabilize and you&amp;rsquo;re in a position to create a public API for your web app. You realize it&amp;rsquo;s hard to make significant changes to your API once it&amp;rsquo;s released and want to get as much right as possible up front. Now, the internet has no shortage on opinions on API design. But, since there&amp;rsquo;s no one widely adopted standard that works in all cases, you&amp;rsquo;re left with a bunch of choices: What formats should you accept?"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hue825486955cd7c56d95e38b4bd2a8e3c_229979_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>ZYChimne</a></h1><h2 class=site-description>Computer Science, Wuhan University</h2></div></header><ol class=social-menu><li><a href=https://github.com/Nexus-Security target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=mailto:0x000216@gmail.com target=_blank title=Email><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-gmail" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M16 20h3a1 1 0 001-1V5a1 1 0 00-1-1h-3v16z"/><path d="M5 20h3V4H5A1 1 0 004 5v14a1 1 0 001 1z"/><path d="M16 4l-4 4-4-4"/><path d="M4 6.5l8 7.5 8-7.5"/></svg></a></li><li><a href=https://www.buymeacoffee.com/0x000216 target=_blank title=Coffee><svg width="884" height="1279" viewBox="0 0 884 1279" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><defs><path d="M0 0H884V1279H0V0z" id="path_1"/><clipPath id="mask_1"><use xlink:href="#path_1"/></clipPath></defs><g id="buymeacoffee"><path d="M0 0H884V1279H0V0z" id="Background" fill="none" fill-rule="evenodd" stroke="none"/><g clip-path="url(#mask_1)"><path d="M791.109 297.518 790.231 297.002 788.201 296.383C789.018 297.072 790.04 297.472 791.109 297.518z" id="Shape" fill="#0d0c22" stroke="none"/><path d="M803.916 388.891l-1 1 1-1z" id="Shape" fill="#0d0c22" stroke="none"/><path d="M792.113 297.647C791.776 297.581 791.447 297.462 791.127 297.29 791.108 297.622 791.108 297.958 791.127 298.29 791.488 298.216 791.83 297.995 792.113 297.647z" id="Shape" fill="#0d0c22" stroke="none"/><path d="M791.113 298.447h1v-1l-1 1z" id="Shape" fill="#0d0c22" stroke="none"/><path d="M803.111 388.726 804.591 387.883 805.142 387.573 805.641 387.04C804.702 387.444 803.846 388.016 803.111 388.726z" id="Shape" fill="#0d0c22" stroke="none"/><path d="M793.669 299.515 792.223 298.138 791.243 297.605C791.77 298.535 792.641 299.221 793.669 299.515z" id="Shape" fill="#0d0c22" stroke="none"/><path d="M430.019 1186.18C428.864 1186.68 427.852 1187.46 427.076 1188.45L427.988 1187.87C428.608 1187.3 429.485 1186.63 430.019 1186.18z" id="Shape" fill="#0d0c22" stroke="none"/><path d="M641.681 1144.63C641.681 1143.33 640.424 1143.57 640.729 1148.21 640.729 1147.84 641.035 1147.46 641.171 1147.1 641.341 1146.27 641.477 1145.46 641.681 1144.63z" id="Shape" fill="#0d0c22" stroke="none"/><path d="M619.284 1186.18C618.129 1186.68 617.118 1187.46 616.342 1188.45L617.254 1187.87C617.873 1187.3 618.751 1186.63 619.284 1186.18z" id="Shape" fill="#0d0c22" stroke="none"/><path d="M281.304 1196.06C280.427 1195.3 279.354 1194.8 278.207 1194.61 279.136 1195.06 280.065 1195.51 280.684 1195.85L281.304 1196.06z" id="Shape" fill="#0d0c22" stroke="none"/><path d="M247.841 1164.01C247.704 1162.66 247.288 1161.35 246.619 1160.16 247.093 1161.39 247.489 1162.66 247.806 1163.94L247.841 1164.01z" id="Shape" fill="#0d0c22" stroke="none"/><path d="M472.623 590.836c-45.941 19.667-98.077 41.966-165.647 41.966C278.71 632.746 250.58 628.868 223.353 621.274l46.733 479.806C271.74 1121.13 280.876 1139.83 295.679 1153.46 310.482 1167.09 329.87 1174.65 349.992 1174.65 349.992 1174.65 416.254 1178.09 438.365 1178.09 462.161 1178.09 533.516 1174.65 533.516 1174.65c20.12.0 39.503-7.57000000000016 54.303-21.2C602.619 1139.82 611.752 1121.13 613.406 1101.08l50.053-530.204C641.091 563.237 618.516 558.161 593.068 558.161 549.054 558.144 513.591 573.303 472.623 590.836z" id="Shape" fill="#fff" stroke="none"/><path d="M78.6885 386.132 79.4799 386.872 79.9962 387.182C79.5987 386.787 79.1603 386.435 78.6885 386.132z" id="Shape" fill="#0d0c22" stroke="none"/><path d="M879.567 341.849 872.53 306.352C866.215 274.503 851.882 244.409 819.19 232.898 808.711 229.215 796.821 227.633 788.786 220.01 780.751 212.388 778.376 200.55 776.518 189.572 773.076 169.423 769.842 149.257 766.314 129.143 763.269 111.85 760.86 92.4243 752.928 76.56c-10.324-21.3016-31.746-33.7591-53.048-42.001C688.965 30.4844 677.826 27.0375 666.517 24.2352 613.297 10.1947 557.342 5.03277 502.591 2.09047 436.875-1.53577 370.983-.443233 305.422 5.35968 256.625 9.79894 205.229 15.1674 158.858 32.0469c-16.948 6.1771-34.413 13.593-47.3 26.6872C95.7448 74.8221 90.5829 99.7026 102.128 119.765c8.208 14.247 22.111 24.313 36.857 30.972C158.192 159.317 178.251 165.846 198.829 170.215c57.297 12.664 116.642 17.636 175.178 19.753C438.887 192.586 503.87 190.464 568.44 183.618 584.408 181.863 600.347 179.758 616.257 177.304 634.995 174.43 647.022 149.928 641.499 132.859 634.891 112.453 617.134 104.538 597.055 107.618 594.095 108.082 591.153 108.512 588.193 108.942L586.06 109.252C579.257 110.113 572.455 110.915 565.653 111.661c-14.052 1.514-28.138 2.753-42.259 3.717C491.768 117.58 460.057 118.595 428.363 118.647c-31.144.0-62.305-.878-93.38-2.92500000000001C320.805 114.793 306.661 113.611 292.552 112.177 286.134 111.506 279.733 110.801 273.333 110.009L267.241 109.235 265.917 109.046 259.602 108.134C246.697 106.189 233.792 103.953 221.025 101.251 219.737 100.965 218.584 100.249 217.758 99.2193 216.932 98.1901 216.482 96.9099 216.482 95.5903 216.482 94.2706 216.932 92.9904 217.758 91.9612 218.584 90.9319 219.737 90.2152 221.025 89.9293H221.266C232.33 87.5721 243.479 85.5589 254.663 83.8038 258.392 83.2188 262.131 82.6453 265.882 82.0832H265.985C272.988 81.6186 280.026 80.3625 286.994 79.5366 347.624 73.2302 408.614 71.0801 469.538 73.1014 499.115 73.9618 528.676 75.6996 558.116 78.6935 564.448 79.3474 570.746 80.0357 577.043 80.8099 579.452 81.1025 581.878 81.4465 584.305 81.7391L589.191 82.4445C603.438 84.5667 617.61 87.1419 631.708 90.1703 652.597 94.7128 679.422 96.1925 688.713 119.077 691.673 126.338 693.015 134.408 694.649 142.03L696.731 151.752C696.786 151.926 696.826 152.105 696.852 152.285 701.773 175.227 706.7 198.169 711.632 221.111 711.994 222.806 712.002 224.557 711.657 226.255 711.312 227.954 710.621 229.562 709.626 230.982 708.632 232.401 707.355 233.6 705.877 234.504 704.398 235.408 702.75 235.997 701.033 236.236H700.895L697.884 236.649 694.908 237.044C685.478 238.272 676.038 239.419 666.586 240.486 647.968 242.608 629.322 244.443 610.648 245.992 573.539 249.077 536.356 251.102 499.098 252.066 480.114 252.57 461.135 252.806 442.162 252.771 366.643 252.712 291.189 248.322 216.173 239.625 208.051 238.662 199.93 237.629 191.808 236.58 198.106 237.389 187.231 235.96 185.029 235.651 179.867 234.928 174.705 234.177 169.543 233.397 152.216 230.798 134.993 227.598 117.7 224.793 96.7944 221.352 76.8005 223.073 57.8906 233.397c-15.5221 8.494-28.0851 21.519-36.013 37.338-8.1559 16.862-10.582 35.221-14.22974 53.34-3.64777 18.118-9.32591 37.613-7.17511 56.213C5.10128 420.431 33.165 453.054 73.5313 460.35 111.506 467.232 149.687 472.807 187.971 477.556 338.361 495.975 490.294 498.178 641.155 484.129 653.44 482.982 665.708 481.732 677.959 480.378 681.786 479.958 685.658 480.398 689.292 481.668S696.23 485.005 698.962 487.717 703.784 493.718 705.08 497.342C706.377 500.967 706.846 504.836 706.453 508.665L702.633 545.797c-7.697 75.031-15.394 150.057-23.091 225.077-8.029 78.783-16.111 157.56-24.244 236.326C653.004 1029.39 650.71 1051.57 648.416 1073.74 646.213 1095.58 645.904 1118.1 641.757 1139.68 635.218 1173.61 612.248 1194.45 578.73 1202.07 548.022 1209.06 516.652 1212.73 485.161 1213.01 450.249 1213.2 415.355 1211.65 380.443 1211.84 343.173 1212.05 297.525 1208.61 268.756 1180.87 243.479 1156.51 239.986 1118.36 236.545 1085.37 231.957 1041.7 227.409 998.039 222.9 954.381L197.607 711.615 181.244 554.538C180.968 551.94 180.693 549.376 180.435 546.76 178.473 528.023 165.207 509.681 144.301 510.627 126.407 511.418 106.069 526.629 108.168 546.76l12.13 116.454 25.087 240.89C152.532 972.528 159.661 1040.96 166.773 1109.41 168.15 1122.52 169.44 1135.67 170.885 1148.78 178.749 1220.43 233.465 1259.04 301.224 1269.91 340.799 1276.28 381.337 1277.59 421.497 1278.24 472.979 1279.07 524.977 1281.05 575.615 1271.72 650.653 1257.95 706.952 1207.85 714.987 1130.13 717.282 1107.69 719.576 1085.25 721.87 1062.8 729.498 988.559 737.115 914.313 744.72 840.061l24.881-242.61 11.408-111.188C781.577 480.749 783.905 475.565 787.649 471.478 791.392 467.391 796.352 464.617 801.794 463.567 823.25 459.386 843.761 452.245 859.023 435.916c24.295-25.998 29.13-59.895 20.544-94.067zM72.7365 365.835C73.247 365.68 72.3065 368.484 71.9034 369.792 71.8229 367.813 71.984 366.058 72.7365 365.835zm1.7756 16.105C74.6842 381.819 75.2003 382.508 75.7337 383.334 74.925 382.576 74.4089 382.009 74.4949 381.94H74.5121zM76.5597 384.641C77.6004 385.897 78.1569 386.689 76.5597 384.641zM80.7002 387.979h.2727C80.9729 388.313 81.473 388.645 81.6548 388.979 81.3533 388.612 81.0186 388.277 80.6548 387.979H80.7002zM800.796 382.989C793.088 390.319 781.473 393.726 769.996 395.43c-128.704 19.099-259.283 28.769-389.399 24.502C287.476 416.749 195.336 406.407 103.144 393.382 94.1102 392.109 84.3197 390.457 78.1082 383.798c-11.7004-12.561-5.9534-37.854-2.9079-53.03C77.9878 316.865 83.3218 298.334 99.8572 296.355 125.667 293.327 155.64 304.218 181.175 308.09 211.917 312.781 242.774 316.538 273.745 319.36 405.925 331.405 540.325 329.529 671.92 311.91 695.905 308.686 719.805 304.941 743.619 300.674 764.835 296.871 788.356 289.731 801.175 311.703 809.967 326.673 811.137 346.701 809.778 363.615 809.359 370.984 806.139 377.915 800.779 382.989H800.796z" id="Shape" fill="#fff" fill-rule="evenodd" stroke="none"/></g></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/about-me/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About Me</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/posts/2016-09-09-best-practices-for-designing-pragmatic/>Best Practices for Designing a Pragmatic RESTful API</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Dec 15, 2019</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>25 minute read</time></div></footer></div></header><section class=article-content><p>Your data model has started to stabilize and you&rsquo;re in a position to create a public API for your web app. You realize it&rsquo;s hard to make significant changes to your API once it&rsquo;s released and want to get as much right as possible up front. Now, the internet has no shortage on opinions on API design. But, since there&rsquo;s no one widely adopted standard that works in all cases, you&rsquo;re left with a bunch of choices: What formats should you accept? How should you authenticate? Should your API be versioned?</p><p>In designing an API for <a class=link href=http://www.enchant.com target=_blank rel=noopener>Enchant</a> (a <a class=link href=http://www.enchant.com/zendesk-alternative target=_blank rel=noopener>Zendesk Alternative</a>), I&rsquo;ve tried to come up with pragmatic answers to these questions. My goal is for the <a class=link href=http://dev.enchant.com/api/v1 target=_blank rel=noopener>Enchant API</a> to be easy to use, easy to adopt and flexible enough to <a class=link href=http://en.wikipedia.org/wiki/Eating_your_own_dog_food target=_blank rel=noopener>dogfood</a> for our own user interfaces.</p><blockquote><p>Really enjoyed this article on REST API design. Heavily informing the part of Starfighter&rsquo;s game that exposes an API. <a class=link href=http://t.co/2cOwC5Ey9E target=_blank rel=noopener>http://t.co/2cOwC5Ey9E</a></p><p>— Patrick McKenzie (@patio11) <a class=link href=https://twitter.com/patio11/status/612655761244618752 target=_blank rel=noopener>June 21, 2015</a></p></blockquote><h2 id=tldr>TL;DR</h2><p>&mldr; or just skip to the bottom and <a class=link href=https://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api#signup-for-updates target=_blank rel=noopener><strong>signup for updates</strong></a></p><p>Latest from the Enchant blog</p><p><a class=link href=https://www.enchant.com/blog/app-clarity target=_blank rel=noopener>How to make people fall in love with your app</a></p><p>A decent app helps you get the job done.<br>A good app helps you get it done faster.<br>A great app, however, makes it effortless.</p><p>&mldr; and those apps, the ones that make things feel effortless, are the ones we love the most.</p><p>But what makes an app feel effortless?<br>More importantly, how can you make your app feel effortless?</p><p><a class=link href=https://www.enchant.com/blog/app-clarity target=_blank rel=noopener>READ MORE →</a></p><h2 id=key-requirements-for-the-api>Key requirements for the API</h2><p>Many of the API design opinions found on the web are academic discussions revolving around subjective interpretations of fuzzy standards as opposed to what makes sense in the real world. My goal with this post is to describe best practices for a pragmatic API designed for today&rsquo;s web applications. I make no attempt to satisfy a standard if it doesn&rsquo;t feel right. To help guide the decision making process, I&rsquo;ve written down some requirements that the API must strive for:</p><ul><li>It should use web standards where they <em>make sense</em></li><li>It should be friendly to the developer and be explorable via a browser address bar</li><li>It should be simple, intuitive and consistent to make adoption not only easy but pleasant</li><li>It should provide enough flexibility to power majority of the <a class=link href=http://www.enchant.com target=_blank rel=noopener>Enchant</a> UI</li><li>It should be efficient, while maintaining balance with the other requirements</li></ul><p>An API is a developer&rsquo;s UI - just like any UI, it&rsquo;s important to ensure the user&rsquo;s experience is thought out carefully!</p><h2 id=use-restful-urls-and-actions>Use RESTful URLs and actions</h2><p>If there&rsquo;s one thing that has gained wide adoption, it&rsquo;s RESTful principles. These were first introduced by <a class=link href=http://roy.gbiv.com/ target=_blank rel=noopener>Roy Fielding</a> in <a class=link href=http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm target=_blank rel=noopener>Chapter 5</a> of his dissertation on <a class=link href=http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm target=_blank rel=noopener>network based software architectures</a>.</p><p>The key principles of <a class=link href=https://en.wikipedia.org/wiki/Representational_state_transfer target=_blank rel=noopener>REST</a> involve separating your API into logical resources. These resources are manipulated using HTTP requests where the method (GET, POST, PUT, PATCH, DELETE) has specific meaning.</p><p><strong>But what can I make a resource?</strong> Well, these should be <a class=link href=https://blog.apigee.com/detail/restful_api_design_nouns_are_good_verbs_are_bad target=_blank rel=noopener>nouns (not verbs!)</a> that make sense from the perspective of the API consumer. Although your internal models may map neatly to resources, it isn&rsquo;t necessarily a one-to-one mapping. The key here is to not leak irrelevant implementation details out to your API! Some of Enchant&rsquo;s nouns would be <em>ticket</em>, <em>user</em> and <em>group</em>.</p><p>Once you have your resources defined, you need to identify what actions apply to them and how those would map to your API. RESTful principles provide strategies to handle <a class=link href=http://en.wikipedia.org/wiki/Create,_read,_update_and_delete target=_blank rel=noopener>CRUD</a> actions using HTTP methods mapped as follows:</p><ul><li>GET /tickets - Retrieves a list of tickets</li><li>GET /tickets/12 - Retrieves a specific ticket</li><li>POST /tickets - Creates a new ticket</li><li>PUT /tickets/12 - Updates ticket #12</li><li>PATCH /tickets/12 - Partially updates ticket #12</li><li>DELETE /tickets/12 - Deletes ticket #12</li></ul><p>The great thing about REST is that you&rsquo;re leveraging existing HTTP methods to implement significant functionality on just a single /tickets endpoint. There are no method naming conventions to follow and the URL structure is clean & clear. <em>REST FTW!</em></p><p><strong>Should the endpoint name be singular or plural?</strong> The keep-it-simple rule applies here. Although your inner-grammatician will tell you it&rsquo;s wrong to describe a single instance of a resource using a plural, the pragmatic answer is to keep the URL format consistent and always use a plural. Not having to deal with odd pluralization (person/people, goose/geese) makes the life of the API consumer better and is easier for the API provider to implement (as most modern frameworks will natively handle /tickets and /tickets/12 under a common controller).</p><p><strong>But how do you deal with relations?</strong> If a relation can only exist within another resource, RESTful principles provide useful guidance. Let&rsquo;s look at this with an example. A ticket in <a class=link href=http://www.enchant.com target=_blank rel=noopener>Enchant</a> consists of a number of messages. These messages can be logically mapped to the /tickets endpoint as follows:</p><ul><li>GET /tickets/12/messages - Retrieves list of messages for ticket #12</li><li>GET /tickets/12/messages/5 - Retrieves message #5 for ticket #12</li><li>POST /tickets/12/messages - Creates a new message in ticket #12</li><li>PUT /tickets/12/messages/5 - Updates message #5 for ticket #12</li><li>PATCH /tickets/12/messages/5 - Partially updates message #5 for ticket #12</li><li>DELETE /tickets/12/messages/5 - Deletes message #5 for ticket #12</li></ul><p>Alternatively, if a relation can exist independently of the resource, it makes sense to just include an identifier for it within the output representation of the resource. The API consumer would then have to hit the relation&rsquo;s endpoint. However, if the relation is commonly requested alongside the resource, the API could offer functionality to automatically embed the relation&rsquo;s representation and avoid the second hit to the API.</p><p><strong>What about actions that don&rsquo;t fit into the world of CRUD operations?</strong></p><p>This is where things can get fuzzy. There are a number of approaches:</p><ol><li>Restructure the action to appear like a field of a resource. This works if the action doesn&rsquo;t take parameters. For example an <em>activate</em> action could be mapped to a boolean activated field and updated via a PATCH to the resource.</li><li>Treat it like a sub-resource with RESTful principles. For example, GitHub&rsquo;s API lets you <a class=link href=http://developer.github.com/v3/gists/#star-a-gist target=_blank rel=noopener>star a gist</a> with PUT /gists/:id/star and <a class=link href=http://developer.github.com/v3/gists/#unstar-a-gist target=_blank rel=noopener>unstar</a> with DELETE /gists/:id/star.</li><li>Sometimes you really have no way to map the action to a sensible RESTful structure. For example, a multi-resource search doesn&rsquo;t really make sense to be applied to a specific resource&rsquo;s endpoint. In this case, /search would make the most sense even though it isn&rsquo;t a resource. This is OK - just do what&rsquo;s right from the perspective of the API consumer and make sure it&rsquo;s documented clearly to avoid confusion.</li></ol><h2 id=ssl-everywhere---all-the-time>SSL everywhere - all the time</h2><p>Always use SSL. No exceptions. Today, your web APIs can get accessed from anywhere there is internet (like libraries, coffee shops, airports among others). Not all of these are secure. Many don&rsquo;t encrypt communications at all, allowing for easy eavesdropping or impersonation if authentication credentials are hijacked.</p><p>Another advantage of always using SSL is that guaranteed encrypted communications simplifies authentication efforts - you can get away with simple access tokens instead of having to sign each API request.</p><p>One thing to watch out for is non-SSL access to API URLs. Do <strong>not</strong> redirect these to their SSL counterparts. Throw a hard error instead! The last thing you want is for poorly configured clients to send requests to an unencrypted endpoint, just to be silently redirected to the actual encrypted endpoint.</p><h2 id=documentation>Documentation</h2><p>An API is only as good as its documentation. The docs should be easy to find and publically accessible. Most developers will check out the docs before attempting any integration effort. When the docs are hidden inside a PDF file or require signing in, they&rsquo;re not only difficult to find but also not easy to search.</p><p>The docs should show examples of complete request/response cycles. Preferably, the requests should be pastable examples - either links that can be pasted into a browser or curl examples that can be pasted into a terminal. <a class=link href=http://developer.github.com/v3/gists/#list-gists target=_blank rel=noopener>GitHub</a> and <a class=link href=https://stripe.com/docs/api target=_blank rel=noopener>Stripe</a> do a great job with this.</p><p>Once you release a public API, you&rsquo;ve committed to not breaking things without notice. The documentation must include any deprecation schedules and details surrounding externally visible API updates. Updates should be delivered via a blog (i.e. a changelog) or a mailing list (preferably both!).</p><h2 id=versioning>Versioning</h2><p>Always version your API. Versioning helps you iterate faster and prevents invalid requests from hitting updated endpoints. It also helps smooth over any major API version transitions as you can continue to offer old API versions for a period of time.</p><p>There are mixed opinions around whether an <a class=link href=http://stackoverflow.com/questions/389169/best-practices-for-api-versioning target=_blank rel=noopener>API version should be included in the URL or in a header</a>. Academically speaking, it should probably be in a header. However, the version needs to be in the URL to ensure browser explorability of the resources across versions (remember the API requirements specified at the top of this post?).</p><p>I&rsquo;m a big fan of the <a class=link href=https://stripe.com/docs/api#versioning target=_blank rel=noopener>approach that Stripe has taken to API versioning</a> - the URL has a major version number (v1), but the API has date based sub-versions which can be chosen using a custom HTTP request header. In this case, the major version provides structural stability of the API as a whole while the sub-versions accounts for smaller changes (field deprecations, endpoint changes, etc).</p><p>An API is never going to be completely stable. Change is inevitable. What&rsquo;s important is how that change is managed. Well documented and announced multi-month deprecation schedules can be an acceptable practice for many APIs. It comes down to what is reasonable given the industry and possible consumers of the API.</p><h2 id=result-filtering-sorting--searching>Result filtering, sorting & searching</h2><p>It&rsquo;s best to keep the base resource URLs as lean as possible. Complex result filters, sorting requirements and advanced searching (when restricted to a single type of resource) can all be easily implemented as query parameters on top of the base URL. Let&rsquo;s look at these in more detail:</p><p><strong>Filtering</strong>: Use a unique query parameter for each field that implements filtering. For example, when requesting a list of tickets from the /tickets endpoint, you may want to limit these to only those in the open state. This could be accomplished with a request like GET /tickets?state=open. Here, state is a query parameter that implements a filter.</p><p><strong>Sorting</strong>: Similar to filtering, a generic parameter sort can be used to describe sorting rules. Accommodate complex sorting requirements by letting the sort parameter take in list of comma separated fields, each with a possible unary negative to imply descending sort order. Let&rsquo;s look at some examples:</p><ul><li>GET /tickets?sort=-priority - Retrieves a list of tickets in descending order of priority</li><li>GET /tickets?sort=-priority,created_at - Retrieves a list of tickets in descending order of priority. Within a specific priority, older tickets are ordered first</li></ul><p><strong>Searching</strong>: Sometimes basic filters aren&rsquo;t enough and you need the power of full text search. Perhaps you&rsquo;re already using <a class=link href=http://www.elasticsearch.org target=_blank rel=noopener>ElasticSearch</a> or another <a class=link href=http://lucene.apache.org target=_blank rel=noopener>Lucene</a> based search technology. When full text search is used as a mechanism of retrieving resource instances for a specific type of resource, it can be exposed on the API as a query parameter on the resource&rsquo;s endpoint. Let&rsquo;s say q. Search queries should be passed straight to the search engine and API output should be in the same format as a normal list result.</p><p>Combining these together, we can build queries like:</p><ul><li>GET /tickets?sort=-updated_at - Retrieve recently updated tickets</li><li>GET /tickets?state=closed&sort=-updated_at - Retrieve recently closed tickets</li><li>GET /tickets?q=return&state=open&sort=-priority,created_at - Retrieve the highest priority open tickets mentioning the word &lsquo;return&rsquo;</li></ul><p><strong>Aliases for common queries</strong></p><p>To make the API experience more pleasant for the average consumer, consider packaging up sets of conditions into easily accessible RESTful paths. For example, the recently closed tickets query above could be packaged up as GET /tickets/recently_closed</p><h2 id=limiting-which-fields-are-returned-by-the-api>Limiting which fields are returned by the API</h2><p>The API consumer doesn&rsquo;t always need the full representation of a resource. The ability select and chose returned fields goes a long way in letting the API consumer minimize network traffic and speed up their own usage of the API.</p><p>Use a fields query parameter that takes a comma separated list of fields to include. For example, the following request would retrieve just enough information to display a sorted listing of open tickets:</p><p>GET /tickets?fields=id,subject,customer_name,updated_at&state=open&sort=-updated_at</p><h2 id=updates--creation-should-return-a-resource-representation>Updates & creation should return a resource representation</h2><p>A PUT, POST or PATCH call may make modifications to fields of the underlying resource that weren&rsquo;t part of the provided parameters (for example: created_at or updated_at timestamps). To prevent an API consumer from having to hit the API again for an updated representation, have the API return the updated (or created) representation as part of the response.</p><p>In case of a POST that resulted in a creation, use a <a class=link href=http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5 target=_blank rel=noopener>HTTP 201 status code</a> and include a <a class=link href=http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30 target=_blank rel=noopener>Location header</a> that points to the URL of the new resource.</p><h2 id=should-you-hateoas>Should you HATEOAS?</h2><p>There are a lot of mixed opinions as to whether the API consumer should create links or whether links should be provided to the API. RESTful design principles specify <a class=link href=https://blog.apigee.com/detail/hateoas_101_introduction_to_a_rest_api_style_video_slides target=_blank rel=noopener>HATEOAS</a> which roughly states that interaction with an endpoint should be defined within metadata that comes with the output representation and not based on out-of-band information.</p><p>Although the web generally works on HATEOAS type principles (where we go to a website&rsquo;s front page and follow links based on what we see on the page), I don&rsquo;t think we&rsquo;re ready for HATEOAS on APIs just yet. When browsing a website, decisions on what links will be clicked are made at run time. However, with an API, decisions as to what requests will be sent are made when the API integration code is written, not at run time. Could the decisions be deferred to run time? Sure, however, there isn&rsquo;t much to gain going down that route as code would still not be able to handle significant API changes without breaking. That said, I think HATEOAS is promising but not ready for prime time just yet. Some more effort has to be put in to define standards and tooling around these principles for its potential to be fully realized.</p><p>For now, it&rsquo;s best to assume the user has access to the documentation & include resource identifiers in the output representation which the API consumer will use when crafting links. There are a couple of advantages of sticking to identifiers - data flowing over the network is minimized and the data stored by API consumers is also minimized (as they are storing small identifiers as opposed to URLs that contain identifiers).</p><p>Also, given this post advocates version numbers in the URL, it makes more sense in the long term for the API consumer to store resource identifiers as opposed to URLs. After all, the identifier is stable across versions but the URL representing it is not!</p><h2 id=json-only-responses>JSON only responses</h2><p>It&rsquo;s time to leave XML behind in APIs. It&rsquo;s verbose, it&rsquo;s hard to parse, it&rsquo;s hard to read, its data model isn&rsquo;t compatible with how most programming languages model data and its extendibility advantages are irrelevant when your output representation&rsquo;s primary needs are serialization from an internal representation.</p><p>I&rsquo;m not going to put much effort into explaining the above breathful as it looks like others (<a class=link href=http://apiblog.youtube.com/2012/12/the-simpler-yet-more-powerful-new.html target=_blank rel=noopener>YouTube</a>, <a class=link href=https://dev.twitter.com/docs/api/1.1/overview#JSON_support_only target=_blank rel=noopener>Twitter</a> & <a class=link href=http://developers.blog.box.com/2012/12/14/v2_api/ target=_blank rel=noopener>Box</a>) have already started the XML exodus.</p><p>I&rsquo;ll just leave you the following Google Trends chart (<a class=link href="http://www.google.com/trends/explore?q=xml+api#q=xml%20api%2C%20json%20api&cmpt=q" target=_blank rel=noopener>XML API vs JSON API</a>) as food for thought:</p><p><img src=https://www.vinaysahni.com/images/201305-xml-vs-json-api.png loading=lazy></p><p>However, if your customer base consists of a large number of enterprise customers, you may find yourself having to support XML anyway. If you must do this, you&rsquo;ll find yourself with a new question:</p><p><strong>Should the media type change based on Accept headers or based on the URL?</strong> To ensure browser explorability, it should be in the URL. The most sensible option here would be to append a .json or .xml extension to the endpoint URL.</p><h2 id=snake_case-vs-camelcase-for-field-names>snake_case vs camelCase for field names</h2><p>If you&rsquo;re using JSON (<em>JavaScript</em> Object Notation) as your primary representation format, the &ldquo;right&rdquo; thing to do is to follow JavaScript naming conventions - and that means camelCase for field names! If you then go the route of building client libraries in various languages, it&rsquo;s best to use idiomatic naming conventions in them - camelCase for C# & Java, snake_case for python & ruby.</p><p>Food for thought: I&rsquo;ve always felt that <a class=link href=http://en.wikipedia.org/wiki/Snake_case target=_blank rel=noopener>snake_case</a> is easier to read than JavaScript&rsquo;s convention of <a class=link href=http://en.wikipedia.org/wiki/CamelCase target=_blank rel=noopener>camelCase</a>. I just didn&rsquo;t have any evidence to back up my gut feelings, until now. Based on an <a class=link href="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?tp=&arnumber=5521745" target=_blank rel=noopener>eye tracking study on camelCase and snake_case</a> (<a class=link href=http://www.cs.kent.edu/~jmaletic/papers/ICPC2010-CamelCaseUnderScoreClouds.pdf target=_blank rel=noopener>PDF</a>) from 2010, <strong>snake_case is 20% easier to read than camelCase</strong>! That impact on readability would affect API explorability and examples in documentation.</p><p>Many popular JSON APIs use snake_case. I suspect this is due to serialization libraries following naming conventions of the underlying language they are using. Perhaps we need to have JSON serialization libraries handle naming convention transformations.</p><h2 id=pretty-print-by-default--ensure-gzip-is-supported>Pretty print by default & ensure gzip is supported</h2><p>An API that provides white-space compressed output isn&rsquo;t very fun to look at from a browser. Although some sort of query parameter (like ?pretty=true) could be provided to enable pretty printing, an API that pretty prints by default is much more approachable. The cost of the extra data transfer is negligible, especially when you compare to the cost of not implementing gzip.</p><p>Consider some use cases: What if an API consumer is debugging and has their code print out data it received from the API - It will be readable by default. Or if the consumer grabbed the URL their code was generating and hit it directly from the browser - it will be readable by default. These are small things. Small things that make an API pleasant to use!</p><p><strong>But what about all the extra data transfer?</strong></p><p>Let&rsquo;s look at this with a real world example. I&rsquo;ve pulled some <a class=link href=https://api.github.com/users/veesahni target=_blank rel=noopener>data from GitHub&rsquo;s API</a>, which uses pretty print by default. I&rsquo;ll also be doing some gzip comparisons:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl> $ curl https://api.github.com/users/veesahni &gt; with-whitespace.txt $ ruby -r json -e &#39;puts JSON JSON.parse(STDIN.read)&#39; &lt; with-whitespace.txt &gt; without-whitespace.txt $ gzip -c with-whitespace.txt &gt; with-whitespace.txt.gz $ gzip -c without-whitespace.txt &gt; without-whitespace.txt.gz 
</span></span></code></pre></td></tr></table></div></div><p>The output files have the following sizes:</p><ul><li>without-whitespace.txt - 1252 bytes</li><li>with-whitespace.txt - 1369 bytes</li><li>without-whitespace.txt.gz - 496 bytes</li><li>with-whitespace.txt.gz - 509 bytes</li></ul><p>In this example, the whitespace increased the output size by 8.5% when gzip is not in play and 2.6% when gzip is in play. On the other hand, the act of <strong>gzipping in itself provided over 60% in bandwidth savings</strong>. Since the cost of pretty printing is relatively small, it&rsquo;s best to pretty print by default and ensure gzip compression is supported!</p><p>To further hammer in this point, Twitter found that there was an <a class=link href=https://dev.twitter.com/blog/announcing-gzip-compression-streaming-apis target=_blank rel=noopener>80% savings (in some cases)</a> when enabling gzip compression on their <a class=link href=https://dev.twitter.com/docs/streaming-apis target=_blank rel=noopener>Streaming API</a>. Stack Exchange went as far as to <a class=link href=https://api.stackexchange.com/docs/compression target=_blank rel=noopener>never return a response that&rsquo;s not compressed</a>!</p><h2 id=dont-use-an-envelope-by-default-but-make-it-possible-when-needed>Don&rsquo;t use an envelope by default, but make it possible when needed</h2><p>Many APIs wrap their responses in envelopes like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl> { &#34;data&#34; : { &#34;id&#34; : 123, &#34;name&#34; : &#34;John&#34; } } 
</span></span></code></pre></td></tr></table></div></div><p>There are a couple of justifications for doing this - it makes it easy to include additional metadata or pagination information, some REST clients don&rsquo;t allow easy access to HTTP headers & <a class=link href=http://en.wikipedia.org/wiki/JSONP target=_blank rel=noopener>JSONP</a> requests have no access to HTTP headers. However, with standards that are being rapidly adopted like <a class=link href=http://www.w3.org/TR/cors/ target=_blank rel=noopener>CORS</a> and the <a class=link href=http://tools.ietf.org/html/rfc5988#page-6 target=_blank rel=noopener>Link header from RFC 5988</a>, enveloping is starting to become unnecessary.</p><p>We can future proof the API by staying envelope free by default and enveloping only in exceptional cases.</p><p><strong>How should an envelope be used in the exceptional cases?</strong></p><p>There are 2 situations where an envelope is really needed - if the API needs to support cross domain requests over JSONP or if the client is incapable of working with HTTP headers.</p><p>JSONP requests come with an additional query parameter (usually named callback or jsonp) representing the name of the callback function. If this parameter is present, the API should switch to a full envelope mode where it always responds with a 200 HTTP status code and passes the real status code in the JSON payload. Any additional HTTP headers that would have been passed alongside the response should be mapped to JSON fields, like so:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl> callback_function({ status_code: 200, next_page: &#34;https://..&#34;, response: { ... actual JSON response body ... } }) 
</span></span></code></pre></td></tr></table></div></div><p>Similarly, to support limited HTTP clients, allow for a special query parameter ?envelope=true that would trigger full enveloping (without the JSONP callback function).</p><h2 id=json-encoded-post-put--patch-bodies>JSON encoded POST, PUT & PATCH bodies</h2><p>If you&rsquo;re following the approach in this post, then you&rsquo;ve embraced JSON for all API output. Let&rsquo;s consider JSON for API input.</p><p>Many APIs use URL encoding in their API request bodies. URL encoding is exactly what it sounds like - request bodies where key value pairs are encoded using the same conventions as one would use to encode data in URL query parameters. This is simple, widely supported and gets the job done.</p><p>However, URL encoding has a few issues that make it problematic. It has no concept of data types. This forces the API to parse integers and booleans out of strings. Furthermore, it has no real concept of hierarchical structure. Although there are some conventions that can build some structure out of key value pairs (like appending [ ] to a key to represent an array), this is no comparison to the native hierarchical structure of JSON.</p><p>If the API is simple, URL encoding may suffice. However, complex APIs should stick to JSON for their API input. Either way, pick one and be consistent throughout the API.</p><p>An API that accepts JSON encoded POST, PUT & PATCH requests should also require the Content-Type header be set to application/json or throw a 415 Unsupported Media Type HTTP status code.</p><h2 id=pagination>Pagination</h2><p>Envelope loving APIs typically include pagination data in the envelope itself. And I don&rsquo;t blame them - until recently, there weren&rsquo;t many better options. The right way to include pagination details today is using the <a class=link href=http://tools.ietf.org/html/rfc5988#page-6 target=_blank rel=noopener>Link header introduced by RFC 5988</a>.</p><p>An API that uses the Link header can return a set of ready-made links so the API consumer doesn&rsquo;t have to construct links themselves. This is especially important when pagination is <a class=link href=https://developers.facebook.com/docs/reference/api/pagination/ target=_blank rel=noopener>cursor based</a>. Here is an example of a Link header used properly, grabbed from <a class=link href=http://developer.github.com/v3/#pagination target=_blank rel=noopener>GitHub</a>&rsquo;s documentation:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl> Link: ; rel=&#34;next&#34;, ; rel=&#34;last&#34; 
</span></span></code></pre></td></tr></table></div></div><p>But this isn&rsquo;t a complete solution as many APIs do like to return the additional pagination information, like a count of the total number of available results. An API that requires sending a count can use a custom HTTP header like X-Total-Count.</p><h2 id=auto-loading-related-resource-representations>Auto loading related resource representations</h2><p>There are many cases where an API consumer needs to load data related to (or referenced) from the resource being requested. Rather than requiring the consumer to hit the API repeatedly for this information, there would be a significant efficiency gain from allowing related data to be returned and loaded alongside the original resource on demand.</p><p>However, as this does <a class=link href=http://idbentley.com/blog/2013/03/14/should-restful-apis-include-relationships/ target=_blank rel=noopener>go against some RESTful principles</a>, we can minimize our deviation by only doing so based on an embed (or expand) query parameter.</p><p>In this case, embed would be a comma separated list of fields to be embedded. Dot-notation could be used to refer to sub-fields. For example:</p><p>GET /tickets/12?embed=customer.name,assigned_user</p><p>This would return a ticket with additional details embedded, like:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl> { &#34;id&#34; : 12, &#34;subject&#34; : &#34;I have a question!&#34;, &#34;summary&#34; : &#34;Hi, ....&#34;, &#34;customer&#34; : { &#34;name&#34; : &#34;Bob&#34; }, assigned_user: { &#34;id&#34; : 42, &#34;name&#34; : &#34;Jim&#34;, } } 
</span></span></code></pre></td></tr></table></div></div><p>Of course, ability to implement something like this really depends on internal complexity. This kind of embedding can easily result in an <a class=link href=http://stackoverflow.com/questions/97197/what-is-the-n1-selects-issue target=_blank rel=noopener>N+1 select issue</a>.</p><h2 id=overriding-the-http-method>Overriding the HTTP method</h2><p>Some HTTP clients can only work with simple GET and POST requests. To increase accessibility to these limited clients, the API needs a way to override the HTTP method. Although there aren&rsquo;t any hard standards here, the popular convention is to accept a request header X-HTTP-Method-Override with a string value containing one of PUT, PATCH or DELETE.</p><p>Note that the override header should <strong>only</strong> be accepted on POST requests. GET requests should never <a class=link href=http://programmers.stackexchange.com/questions/188860/why-shouldnt-a-get-request-change-data-on-the-server target=_blank rel=noopener>change data on the server</a>!</p><h2 id=rate-limiting>Rate limiting</h2><p>To prevent abuse, it is standard practice to add some sort of rate limiting to an API. <a class=link href=http://tools.ietf.org/html/rfc6585 target=_blank rel=noopener>RFC 6585</a> introduced a HTTP status code <a class=link href=http://tools.ietf.org/html/rfc6585#section-4 target=_blank rel=noopener>429 Too Many Requests</a> to accommodate this.</p><p>However, it can be very useful to notify the consumer of their limits before they actually hit it. This is an area that currently lacks standards but has a number of <a class=link href=http://stackoverflow.com/questions/16022624/examples-of-http-api-rate-limiting-http-response-headers target=_blank rel=noopener>popular conventions using HTTP response headers</a>.</p><p>At a minimum, include the following headers (using Twitter&rsquo;s <a class=link href=https://dev.twitter.com/docs/rate-limiting/1.1 target=_blank rel=noopener>naming conventions</a> as headers typically don&rsquo;t have mid-word capitalization):</p><ul><li>X-Rate-Limit-Limit - The number of allowed requests in the current period</li><li>X-Rate-Limit-Remaining - The number of remaining requests in the current period</li><li>X-Rate-Limit-Reset - The number of seconds left in the current period</li></ul><p><strong>Why is number of seconds left being used instead of a time stamp for X-Rate-Limit-Reset?</strong></p><p>A timestamp contains all sorts of useful but unnecessary information like the date and possibly the time-zone. An API consumer really just wants to know when they can send the request again & the number of seconds answers this question with minimal additional processing on their end. It also avoids issues related to <a class=link href=http://en.wikipedia.org/wiki/Clock_skew target=_blank rel=noopener>clock skew</a>.</p><p>Some APIs use a UNIX timestamp (seconds since epoch) for X-Rate-Limit-Reset. Don&rsquo;t do this!</p><p><strong>Why is it bad practice to use a UNIX timestamp for X-Rate-Limit-Reset?</strong></p><p>The <a class=link href=http://www.w3.org/Protocols/rfc2616/rfc2616.txt target=_blank rel=noopener>HTTP spec</a> already <a class=link href=http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3 target=_blank rel=noopener>specifies</a> using <a class=link href=http://www.ietf.org/rfc/rfc1123.txt target=_blank rel=noopener>RFC 1123 date formats</a> (currently being used in <a class=link href=http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.18 target=_blank rel=noopener>Date</a>, <a class=link href=http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.25 target=_blank rel=noopener>If-Modified-Since</a> & <a class=link href=http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.29 target=_blank rel=noopener>Last-Modified</a> HTTP headers). If we were to specify a new HTTP header that takes a timestamp of some sort, it should follow RFC 1123 conventions instead of using UNIX timestamps.</p><h2 id=authentication>Authentication</h2><p>A RESTful API should be stateless. This means that request authentication should not depend on cookies or sessions. Instead, each request should come with some sort authentication credentials.</p><p>By always using SSL, the authentication credentials can be simplified to a randomly generated access token that is delivered in the user name field of HTTP Basic Auth. The great thing about this is that it&rsquo;s completely browser explorable - the browser will just popup a prompt asking for credentials if it receives a 401 Unauthorized status code from the server.</p><p>However, this token-over-basic-auth method of authentication is only acceptable in cases where it&rsquo;s practical to have the user copy a token from an administration interface to the API consumer environment. In cases where this isn&rsquo;t possible, <a class=link href=http://oauth.net/2/ target=_blank rel=noopener>OAuth 2</a> should be used to provide secure token transfer to a third party. OAuth 2 uses <a class=link href=http://tools.ietf.org/html/rfc6750 target=_blank rel=noopener>Bearer tokens</a> & also depends on SSL for its underlying transport encryption.</p><p>An API that needs to support JSONP will need a third method of authentication, as JSONP requests cannot send HTTP Basic Auth credentials or Bearer tokens. In this case, a special query parameter access_token can be used. Note: there is an inherent security issue in using a query parameter for the token as most web servers store query parameters in server logs.</p><p>For what it&rsquo;s worth, all three methods above are just ways to transport the token across the API boundary. The actual underlying token itself could be identical.</p><h2 id=caching>Caching</h2><p>HTTP provides a built-in caching framework! All you have to do is include some additional outbound response headers and do a little validation when you receive some inbound request headers.</p><p>There are 2 approaches: <a class=link href=http://en.wikipedia.org/wiki/HTTP_ETag target=_blank rel=noopener>ETag</a> and <a class=link href=http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.29 target=_blank rel=noopener>Last-Modified</a></p><p><strong>ETag</strong>: When generating a response, include a HTTP header ETag containing a hash or checksum of the representation. This value should change whenever the output representation changes. Now, if an inbound HTTP requests contains a If-None-Match header with a matching ETag value, the API should return a 304 Not Modified status code instead of the output representation of the resource.</p><p><strong>Last-Modified</strong>: This basically works like to ETag, except that it uses timestamps. The response header Last-Modified contains a timestamp in <a class=link href=http://www.ietf.org/rfc/rfc1123.txt target=_blank rel=noopener>RFC 1123</a> format which is validated against If-Modified-Since. Note that the HTTP spec has had <a class=link href=http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3 target=_blank rel=noopener>3 different acceptable date formats</a> and the server should be prepared to accept any one of them.</p><h2 id=errors>Errors</h2><p>Just like an HTML error page shows a useful error message to a visitor, an API should provide a useful error message in a known consumable format. The representation of an error should be no different than the representation of any resource, just with its own set of fields.</p><p>The API should always return sensible HTTP status codes. API errors typically break down into 2 types: 400 series status codes for client issues & 500 series status codes for server issues. At a minimum, the API should standardize that all 400 series errors come with consumable JSON error representation. If possible (i.e. if load balancers & reverse proxies can create custom error bodies), this should extend to 500 series status codes.</p><p>A JSON error body should provide a few things for the developer - a useful error message, a unique error code (that can be looked up for more details in the docs) and possibly a detailed description. JSON output representation for something like this would look like:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl> { &#34;code&#34; : 1234, &#34;message&#34; : &#34;Something bad happened :(&#34;, &#34;description&#34; : &#34;More details about the error here&#34; } 
</span></span></code></pre></td></tr></table></div></div><p>Validation errors for PUT, PATCH and POST requests will need a field breakdown. This is best modeled by using a fixed top-level error code for validation failures and providing the detailed errors in an additional errors field, like so:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl> { &#34;code&#34; : 1024, &#34;message&#34; : &#34;Validation Failed&#34;, &#34;errors&#34; : [ { &#34;code&#34; : 5432, &#34;field&#34; : &#34;first_name&#34;, &#34;message&#34; : &#34;First name cannot have fancy characters&#34; }, { &#34;code&#34; : 5622, &#34;field&#34; : &#34;password&#34;, &#34;message&#34; : &#34;Password cannot be blank&#34; } ] } 
</span></span></code></pre></td></tr></table></div></div><h2 id=http-status-codes>HTTP status codes</h2><p>HTTP defines a bunch of <a class=link href=http://en.wikipedia.org/wiki/List_of_HTTP_status_codes target=_blank rel=noopener>meaningful status codes</a> that can be returned from your API. These can be leveraged to help the API consumers route their responses accordingly. I&rsquo;ve curated a short list of the ones that you definitely should be using:</p><ul><li>200 OK - Response to a successful GET, PUT, PATCH or DELETE. Can also be used for a POST that doesn&rsquo;t result in a creation.</li><li>201 Created - Response to a POST that results in a creation. Should be combined with a <a class=link href=http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30 target=_blank rel=noopener>Location header</a> pointing to the location of the new resource</li><li>204 No Content - Response to a successful request that won&rsquo;t be returning a body (like a DELETE request)</li><li>304 Not Modified - Used when HTTP caching headers are in play</li><li>400 Bad Request - The request is malformed, such as if the body does not parse</li><li>401 Unauthorized - When no or invalid authentication details are provided. Also useful to trigger an auth popup if the API is used from a browser</li><li>403 Forbidden - When authentication succeeded but authenticated user doesn&rsquo;t have access to the resource</li><li>404 Not Found - When a non-existent resource is requested</li><li>405 Method Not Allowed - When an HTTP method is being requested that isn&rsquo;t allowed for the authenticated user</li><li>410 Gone - Indicates that the resource at this end point is no longer available. Useful as a blanket response for old API versions</li><li>415 Unsupported Media Type - If incorrect content type was provided as part of the request</li><li>422 Unprocessable Entity - Used for validation errors</li><li>429 Too Many Requests - When a request is rejected due to rate limiting</li></ul><h2 id=in-summary>In Summary</h2><p>An API is a user interface for developers. Put the effort in to ensure it&rsquo;s not just functional but pleasant to use.</p><p>Developers from Spotify, IBM and eBay already follow this blog.<br>You should too.</p><p>from Hacker News <a class=link href=https://ift.tt/2GYbXAw target=_blank rel=noopener>https://ift.tt/2GYbXAw</a></p></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><footer class=site-footer><section class=copyright>&copy;
2020 -
2022 ZYChimne</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.11.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#tldr>TL;DR</a></li><li><a href=#key-requirements-for-the-api>Key requirements for the API</a></li><li><a href=#use-restful-urls-and-actions>Use RESTful URLs and actions</a></li><li><a href=#ssl-everywhere---all-the-time>SSL everywhere - all the time</a></li><li><a href=#documentation>Documentation</a></li><li><a href=#versioning>Versioning</a></li><li><a href=#result-filtering-sorting--searching>Result filtering, sorting & searching</a></li><li><a href=#limiting-which-fields-are-returned-by-the-api>Limiting which fields are returned by the API</a></li><li><a href=#updates--creation-should-return-a-resource-representation>Updates & creation should return a resource representation</a></li><li><a href=#should-you-hateoas>Should you HATEOAS?</a></li><li><a href=#json-only-responses>JSON only responses</a></li><li><a href=#snake_case-vs-camelcase-for-field-names>snake_case vs camelCase for field names</a></li><li><a href=#pretty-print-by-default--ensure-gzip-is-supported>Pretty print by default & ensure gzip is supported</a></li><li><a href=#dont-use-an-envelope-by-default-but-make-it-possible-when-needed>Don&rsquo;t use an envelope by default, but make it possible when needed</a></li><li><a href=#json-encoded-post-put--patch-bodies>JSON encoded POST, PUT & PATCH bodies</a></li><li><a href=#pagination>Pagination</a></li><li><a href=#auto-loading-related-resource-representations>Auto loading related resource representations</a></li><li><a href=#overriding-the-http-method>Overriding the HTTP method</a></li><li><a href=#rate-limiting>Rate limiting</a></li><li><a href=#authentication>Authentication</a></li><li><a href=#caching>Caching</a></li><li><a href=#errors>Errors</a></li><li><a href=#http-status-codes>HTTP status codes</a></li><li><a href=#in-summary>In Summary</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>