<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Note:
This readme and related documentation are Work in Progress.
Chaos Mesh is a cloud-native Chaos Engineering platform that orchestrates chaos on Kubernetes environments. At the current stage, it has the following components:
Chaos Operator: the core component for chaos orchestration. Fully open sourced. Chaos Dashboard: a visualized panel that shows the impacts of chaos experiments on the online services of the system; under development; curently only supports chaos experiments on TiDB."><title>A Chaos Engineering Platform for Kubernetes</title><link rel=canonical href=https://Nexus-Security.github.io/posts/2016-09-09-a-chaos-engineering-platform-for/><link rel=stylesheet href=/scss/style.min.450926226e724574a6b936335ea06111f8aeb253d932c86cb2cc807341cd2889.css><meta property="og:title" content="A Chaos Engineering Platform for Kubernetes"><meta property="og:description" content="Note:
This readme and related documentation are Work in Progress.
Chaos Mesh is a cloud-native Chaos Engineering platform that orchestrates chaos on Kubernetes environments. At the current stage, it has the following components:
Chaos Operator: the core component for chaos orchestration. Fully open sourced. Chaos Dashboard: a visualized panel that shows the impacts of chaos experiments on the online services of the system; under development; curently only supports chaos experiments on TiDB."><meta property="og:url" content="https://Nexus-Security.github.io/posts/2016-09-09-a-chaos-engineering-platform-for/"><meta property="og:site_name" content="ZYChimne"><meta property="og:type" content="article"><meta property="article:section" content="Posts"><meta property="article:published_time" content="2020-01-01T12:55:00+01:00"><meta property="article:modified_time" content="2020-01-01T12:55:00+01:00"><meta name=twitter:title content="A Chaos Engineering Platform for Kubernetes"><meta name=twitter:description content="Note:
This readme and related documentation are Work in Progress.
Chaos Mesh is a cloud-native Chaos Engineering platform that orchestrates chaos on Kubernetes environments. At the current stage, it has the following components:
Chaos Operator: the core component for chaos orchestration. Fully open sourced. Chaos Dashboard: a visualized panel that shows the impacts of chaos experiments on the online services of the system; under development; curently only supports chaos experiments on TiDB."></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu8b78332b6420dc9affabe23720d11e63_1937019_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>üçá</span></figure><div class=site-meta><h1 class=site-name><a href=/>ZYChimne</a></h1><h2 class=site-description>Computer Science, Wuhan University</h2></div></header><ol class=social-menu><li><a href=https://github.com/ZYChimne target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/ZChimne target=_blank title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/about-me/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About Me</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/posts/2016-09-09-a-chaos-engineering-platform-for/>A Chaos Engineering Platform for Kubernetes</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Jan 01, 2020</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><p><a class=link href=https://github.com/pingcap/chaos-mesh/blob/master/static/logo.png target=_blank rel=noopener><img src=https://github.com/pingcap/chaos-mesh/raw/master/static/logo.png loading=lazy alt=chaos_logo></a></p><blockquote><p><strong>Note:</strong></p><p>This readme and related documentation are Work in Progress.</p></blockquote><p>Chaos Mesh is a cloud-native Chaos Engineering platform that orchestrates chaos on Kubernetes environments. At the current stage, it has the following components:</p><ul><li><strong>Chaos Operator</strong>: the core component for chaos orchestration. Fully open sourced.</li><li><strong>Chaos Dashboard</strong>: a visualized panel that shows the impacts of chaos experiments on the online services of the system; under development; curently only supports chaos experiments on TiDB.</li></ul><p>See the following demo video for a quick view of Chaos Mesh:</p><p><a class=link href="https://www.youtube.com/watch?v=ifZEwdJO868" target=_blank rel=noopener><img src=https://github.com/pingcap/chaos-mesh/raw/master/static/demo.gif loading=lazy alt="Watch the video"></a></p><h2 id=httpsgithubcompingcapchaos-meshchaos-operatorchaos-operator><a class=link href=https://github.com/pingcap/chaos-mesh#chaos-operator target=_blank rel=noopener></a>Chaos Operator</h2><p>Chaos Operator injects chaos into the applications and Kubernetes infrastructure in a manageable way, which provides easy, custom definitions for chaos experiments and automatic orchestration. There are three components at play:</p><p><strong>Controller-manager</strong>: used to schedule and manage the lifecycle of CRD objects</p><p><strong>Chaos-daemon</strong>: runs as daemonset with privileged system permissions over network, Cgroup, etc. for a specifc node</p><p><strong>Sidecar</strong>: a special type of container that is dynamically injected into the target Pod by the webhook-server, which can be used for hacjacking I/O of the application container.</p><p><a class=link href=https://github.com/pingcap/chaos-mesh/blob/master/static/chaos-mesh-overview.png target=_blank rel=noopener><img src=https://github.com/pingcap/chaos-mesh/raw/master/static/chaos-mesh-overview.png loading=lazy alt="Chaos Operator"></a></p><p>Chaos Operator uses <a class=link href=https://kubernetes.io/docs/tasks/access-kubernetes-api/custom-resources/custom-resource-definitions/ target=_blank rel=noopener>Custom Resource Definition (CRD)</a> to define chaos objects. The current implementation supports three types of CRD objects for fault injection, namely PodChaos, NetworkChaos, and IOChaos, which correspond to the following major actions (experiments):</p><ul><li>pod-kill: The selected pod is killed (ReplicaSet or something similar may be needed to ensure the pod will be restarted)</li><li>pod-failure: The selected pod will be unavailable in a specified period of time</li><li>netem chaos: Network chaos such as delay, duplication, etc.</li><li>network-partition: Simulate network partition</li><li>IO chaos: simulate file system falults such as I/O delay, read/write errors, etc.</li></ul><h2 id=httpsgithubcompingcapchaos-meshprerequisitesprerequisites><a class=link href=https://github.com/pingcap/chaos-mesh#prerequisites target=_blank rel=noopener></a>Prerequisites</h2><p>Before deploying Chaos Mesh, make sure the following items have been installed. If you would like to have a try on your machine, you can refer to <a class=link href=https://github.com/pingcap/chaos-mesh#get-started-on-your-local-machine target=_blank rel=noopener>get-started-on-your-local-machine</a> section.</p><ul><li>Kubernetes >= v1.12 and &lt; v1.16</li><li><a class=link href=https://kubernetes.io/docs/admin/authorization/rbac target=_blank rel=noopener>RBAC</a> enabled (optional)</li><li><a class=link href=https://helm.sh/ target=_blank rel=noopener>Helm</a> version >= v2.8.2 and &lt; v3.0.0</li></ul><h2 id=httpsgithubcompingcapchaos-meshdeploy-chaos-meshdeploy-chaos-mesh><a class=link href=https://github.com/pingcap/chaos-mesh#deploy-chaos-mesh target=_blank rel=noopener></a>Deploy Chaos Mesh</h2><h3 id=httpsgithubcompingcapchaos-meshget-the-helm-filesget-the-helm-files><a class=link href=https://github.com/pingcap/chaos-mesh#get-the-helm-files target=_blank rel=noopener></a>Get the Helm files</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git clone https://github.com/pingcap/chaos-mesh.git cd chaos-mesh/
</span></span></code></pre></td></tr></table></div></div><h3 id=httpsgithubcompingcapchaos-meshcreate-custom-resource-typecreate-custom-resource-type><a class=link href=https://github.com/pingcap/chaos-mesh#create-custom-resource-type target=_blank rel=noopener></a>Create custom resource type</h3><p>To use Chaos Mesh, you must first create the related custom resource type.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>kubectl apply -f manifests/ kubectl get crd podchaos.pingcap.com
</span></span></code></pre></td></tr></table></div></div><h3 id=httpsgithubcompingcapchaos-meshinstall-chaos-meshinstall-chaos-mesh><a class=link href=https://github.com/pingcap/chaos-mesh#install-chaos-mesh target=_blank rel=noopener></a>Install Chaos Mesh</h3><ul><li>Install Chaos Mesh with Chaos Operator only</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>helm install helm/chaos-mesh --name=chaos-mesh --namespace=chaos-testing kubectl get pods --namespace chaos-testing -l app.kubernetes.io/instance=chaos-mesh
</span></span></code></pre></td></tr></table></div></div><ul><li>Install Chaos Mesh with Chaos Operator and Chaos Dashboard</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>helm install helm/chaos-mesh --name=chaos-mesh --namespace=chaos-testing --set dashboard.create=true
</span></span></code></pre></td></tr></table></div></div><h2 id=httpsgithubcompingcapchaos-meshget-started-on-your-local-machineget-started-on-your-local-machine><a class=link href=https://github.com/pingcap/chaos-mesh#get-started-on-your-local-machine target=_blank rel=noopener></a>Get started on your local machine</h2><blockquote><p><strong>Warning:</strong></p><p><strong>This deployment is for testing only. DO NOT USE in production!</strong></p></blockquote><p>You can try Chaos Mesh on your local K8s environment deployed using <code>kind</code> or <code>minikube</code>.</p><h3 id=httpsgithubcompingcapchaos-meshdeploy-your-local-k8s-environmentdeploy-your-local-k8s-environment><a class=link href=https://github.com/pingcap/chaos-mesh#deploy-your-local-k8s-environment target=_blank rel=noopener></a>Deploy your local K8s environment</h3><h4 id=httpsgithubcompingcapchaos-meshdeploy-with-kinddeploy-with-kind><a class=link href=https://github.com/pingcap/chaos-mesh#deploy-with-kind target=_blank rel=noopener></a>Deploy with <code>kind</code></h4><ol><li><p>Clone the code</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git clone --depth=1 https://github.com/pingcap/chaos-mesh &amp;&amp; \\ cd chaos-mesh
</span></span></code></pre></td></tr></table></div></div></li><li><p>Run the script and create a local Kubernetes cluster. Make sure you have installed <a class=link href=https://kind.sigs.k8s.io/ target=_blank rel=noopener>kind</a>, and run the script below to create a local Kubernetes cluster.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>hack/kind-cluster-build.sh
</span></span></code></pre></td></tr></table></div></div></li><li><p>To connect the local Kubernetes cluster, set the default configuration file path of <code>kubectl</code> to <code>kube-config</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>export KUBECONFIG=&#34;$(kind get kubeconfig-path)&#34;
</span></span></code></pre></td></tr></table></div></div></li><li><p>Verify whether the Kubernetes cluster is on and running</p></li><li><p>Install <code>chaos-mesh</code> on <code>kind</code> kubernetes cluster as suggested in <a class=link href=https://github.com/pingcap/chaos-mesh#deploy-chaos-mesh target=_blank rel=noopener>Deploy Chaos Mesh</a>.</p></li></ol><h4 id=httpsgithubcompingcapchaos-meshdeploy-with-minikubedeploy-with-minikube><a class=link href=https://github.com/pingcap/chaos-mesh#deploy-with-minikube target=_blank rel=noopener></a>Deploy with <code>minikube</code></h4><ol><li><p>Start a <code>minikube</code> kubernetes cluster. Make sure you have installed <a class=link href=https://kubernetes.io/docs/tasks/tools/install-minikube/ target=_blank rel=noopener>minikube</a>, and run the script below to start a local <code>minikube</code> cluster</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>minikube start --kubernetes-version v1.15.0 --cpus 4 --memory &#34;8192mb&#34; # we recommend that you allocate enough RAM(better more than 8192 MiB) to VM
</span></span></code></pre></td></tr></table></div></div></li><li><p>Install helm</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>curl https://raw.githubusercontent.com/helm/helm/master/scripts/get | bash helm init
</span></span></code></pre></td></tr></table></div></div></li><li><p>Check whether helm tiller pod is running</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>kubectl -n kube-system get pods -l app=helm
</span></span></code></pre></td></tr></table></div></div></li><li><p>Install <code>chaos-operator</code> as suggested in <a class=link href=https://github.com/pingcap/chaos-mesh#deploy-chaos-mesh target=_blank rel=noopener>Deploy Chaos Mesh</a>.</p></li></ol><p><strong>Note:</strong></p><p>There are some known restrictions for Chaos Operator deployed on <code>kind</code> and <code>minikube</code> clusters:</p><ul><li><p>All network-related chaos is not supported for <code>kind</code> cluster.</p><p>Chaos Operator uses docker pkg to transform between container id and pid, which is necessary to find network namespace for pods.<code>Kind</code> uses <code>containerd</code> as Introducing Container Runtime Interface (CRI) runtime and it&rsquo;s not supported in our implementation yet.</p></li><li><p><code>netem chaos</code> is not supported for <code>minikube</code> clusters.</p><p>In <code>minikube</code>, the default virtual machine driver&rsquo;s image doesn&rsquo;t contain the <code>sch_netem</code> kernel module. You can use <code>none</code> driver (if your host is Linux with the <code>sch_netem</code> kernel module loaded) to try these chaos actions on <code>minikube</code> or <a class=link href=https://minikube.sigs.k8s.io/docs/contributing/iso/ target=_blank rel=noopener>build an image with sch_netem by yourself</a>.</p></li></ul><h3 id=httpsgithubcompingcapchaos-meshdeploy-target-clusterdeploy-target-cluster><a class=link href=https://github.com/pingcap/chaos-mesh#deploy-target-cluster target=_blank rel=noopener></a>Deploy target cluster</h3><p>After Chaos Mesh is deployed, we can deploy the target cluster to be tested, or where we want to inject faults. For illustration purposes, we use TiDB as our sample cluster.</p><p>You can follow the instructions in the following two documents to deploy a TiDB cluster:</p><h3 id=httpsgithubcompingcapchaos-meshdefine-chaos-experiment-config-filedefine-chaos-experiment-config-file><a class=link href=https://github.com/pingcap/chaos-mesh#define-chaos-experiment-config-file target=_blank rel=noopener></a>Define chaos experiment config file</h3><p>In this sample experiment config file, we will define a chaos experiment to kill one tikv pod randomly:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>apiVersion: pingcap.com/v1alpha1 kind: PodChaos metadata: name: pod-failure-example namespace: chaos-testing spec: action: pod-failure # the specific chaos action to inject; supported actions: pod-kill/pod-failure mode: one # the mode to run chaos action; supported mode are one/all/fixed/fixed-percent/random-max-percent duration: &#34;60s&#34; # duration for the injected chaos experiment selector: # pods where to inject chaos actions namespaces: - tidb-cluster-demo labelSelectors: &#34;app.kubernetes.io/component&#34;: &#34;tikv&#34; scheduler: #defines scheduler rules for the running time of the chaos experiments about pods. cron: &#34;@every 5m&#34;
</span></span></code></pre></td></tr></table></div></div><h3 id=httpsgithubcompingcapchaos-meshcreate-a-chaos-experimentcreate-a-chaos-experiment><a class=link href=https://github.com/pingcap/chaos-mesh#create-a-chaos-experiment target=_blank rel=noopener></a>Create a chaos experiment</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>kubectl apply -f pod-failure-example.yaml kubectl get podchaos --namespace=chaos-testing
</span></span></code></pre></td></tr></table></div></div><p>You can see the QPS performance affected by the chaos experiment from TiDB Grafana dashboard:</p><p><a class=link href=https://github.com/pingcap/chaos-mesh/blob/master/static/tikv-pod-failure.png target=_blank rel=noopener><img src=https://github.com/pingcap/chaos-mesh/raw/master/static/tikv-pod-failure.png loading=lazy alt=tikv-pod-failure></a></p><h3 id=httpsgithubcompingcapchaos-meshupdate-a-chaos-experimentupdate-a-chaos-experiment><a class=link href=https://github.com/pingcap/chaos-mesh#update-a-chaos-experiment target=_blank rel=noopener></a>Update a chaos experiment</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vim pod-failure-example.yaml # modify pod-failure-example.yaml to what you want kubectl apply -f pod-failure-example.yaml
</span></span></code></pre></td></tr></table></div></div><h4 id=httpsgithubcompingcapchaos-meshdelete-a-chaos-experimentdelete-a-chaos-experiment><a class=link href=https://github.com/pingcap/chaos-mesh#delete-a-chaos-experiment target=_blank rel=noopener></a>Delete a chaos experiment</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>kubectl delete -f pod-failure-example.yaml
</span></span></code></pre></td></tr></table></div></div><h4 id=httpsgithubcompingcapchaos-meshwarch-your-chaos-experiments-in-dashboardwarch-your-chaos-experiments-in-dashboard><a class=link href=https://github.com/pingcap/chaos-mesh#warch-your-chaos-experiments-in-dashboard target=_blank rel=noopener></a>Warch your chaos experiments in Dashboard</h4><p>Chaos Dashboard is currently only available for TiDB clusters. Stay tuned for more supports or join us in making it happen.</p><blockquote><p><strong>Note:</strong></p><p>Make sure you have used the <a class=link href=https://github.com/pingcap/chaos-mesh#deploy-chaos-mesh target=_blank rel=noopener>option</a> to deploy Chaos Mesh with Chaos Dashboard. If Chaos Dashboard wasn&rsquo;t installed in your Chaos Mesh, you need to install it by upgrading Chaos Mesh:</p><p><code>helm upgrade chaos-mesh helm/chaos-mesh --namespace=chaos-testing --set dashboard.create=true</code></p></blockquote><p>A typical way to access it is to use <code>kubectl port-forward</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>kubectl port-forward -n chaos-testing svc/chaos-dashboard 8080:80
</span></span></code></pre></td></tr></table></div></div><p>Then you can access <a class=link href=http://localhost:8080 target=_blank rel=noopener><code>http://localhost:8080</code></a> in browser.</p><h2 id=httpsgithubcompingcapchaos-meshroadmaproadmap><a class=link href=https://github.com/pingcap/chaos-mesh#roadmap target=_blank rel=noopener></a>Roadmap</h2><h2 id=httpsgithubcompingcapchaos-meshlicenselicense><a class=link href=https://github.com/pingcap/chaos-mesh#license target=_blank rel=noopener></a>License</h2><p>Chaos Mesh is licensed under the Apache License, Version 2.0. See <a class=link href=https://github.com/pingcap/chaos-mesh/blob/master/LICENSE target=_blank rel=noopener>LICENSE</a> for the full license text.</p><p>from Hacker News <a class=link href=https://ift.tt/39qSoPT target=_blank rel=noopener>https://ift.tt/39qSoPT</a></p></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><footer class=site-footer><section class=copyright>&copy;
2020 -
2022 ZYChimne</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.11.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#httpsgithubcompingcapchaos-meshchaos-operatorchaos-operator><a href=https://github.com/pingcap/chaos-mesh#chaos-operator></a>Chaos Operator</a></li><li><a href=#httpsgithubcompingcapchaos-meshprerequisitesprerequisites><a href=https://github.com/pingcap/chaos-mesh#prerequisites></a>Prerequisites</a></li><li><a href=#httpsgithubcompingcapchaos-meshdeploy-chaos-meshdeploy-chaos-mesh><a href=https://github.com/pingcap/chaos-mesh#deploy-chaos-mesh></a>Deploy Chaos Mesh</a><ol><li><a href=#httpsgithubcompingcapchaos-meshget-the-helm-filesget-the-helm-files><a href=https://github.com/pingcap/chaos-mesh#get-the-helm-files></a>Get the Helm files</a></li><li><a href=#httpsgithubcompingcapchaos-meshcreate-custom-resource-typecreate-custom-resource-type><a href=https://github.com/pingcap/chaos-mesh#create-custom-resource-type></a>Create custom resource type</a></li><li><a href=#httpsgithubcompingcapchaos-meshinstall-chaos-meshinstall-chaos-mesh><a href=https://github.com/pingcap/chaos-mesh#install-chaos-mesh></a>Install Chaos Mesh</a></li></ol></li><li><a href=#httpsgithubcompingcapchaos-meshget-started-on-your-local-machineget-started-on-your-local-machine><a href=https://github.com/pingcap/chaos-mesh#get-started-on-your-local-machine></a>Get started on your local machine</a><ol><li><a href=#httpsgithubcompingcapchaos-meshdeploy-your-local-k8s-environmentdeploy-your-local-k8s-environment><a href=https://github.com/pingcap/chaos-mesh#deploy-your-local-k8s-environment></a>Deploy your local K8s environment</a><ol><li><a href=#httpsgithubcompingcapchaos-meshdeploy-with-kinddeploy-with-kind><a href=https://github.com/pingcap/chaos-mesh#deploy-with-kind></a>Deploy with <code>kind</code></a></li><li><a href=#httpsgithubcompingcapchaos-meshdeploy-with-minikubedeploy-with-minikube><a href=https://github.com/pingcap/chaos-mesh#deploy-with-minikube></a>Deploy with <code>minikube</code></a></li></ol></li><li><a href=#httpsgithubcompingcapchaos-meshdeploy-target-clusterdeploy-target-cluster><a href=https://github.com/pingcap/chaos-mesh#deploy-target-cluster></a>Deploy target cluster</a></li><li><a href=#httpsgithubcompingcapchaos-meshdefine-chaos-experiment-config-filedefine-chaos-experiment-config-file><a href=https://github.com/pingcap/chaos-mesh#define-chaos-experiment-config-file></a>Define chaos experiment config file</a></li><li><a href=#httpsgithubcompingcapchaos-meshcreate-a-chaos-experimentcreate-a-chaos-experiment><a href=https://github.com/pingcap/chaos-mesh#create-a-chaos-experiment></a>Create a chaos experiment</a></li><li><a href=#httpsgithubcompingcapchaos-meshupdate-a-chaos-experimentupdate-a-chaos-experiment><a href=https://github.com/pingcap/chaos-mesh#update-a-chaos-experiment></a>Update a chaos experiment</a><ol><li><a href=#httpsgithubcompingcapchaos-meshdelete-a-chaos-experimentdelete-a-chaos-experiment><a href=https://github.com/pingcap/chaos-mesh#delete-a-chaos-experiment></a>Delete a chaos experiment</a></li><li><a href=#httpsgithubcompingcapchaos-meshwarch-your-chaos-experiments-in-dashboardwarch-your-chaos-experiments-in-dashboard><a href=https://github.com/pingcap/chaos-mesh#warch-your-chaos-experiments-in-dashboard></a>Warch your chaos experiments in Dashboard</a></li></ol></li></ol></li><li><a href=#httpsgithubcompingcapchaos-meshroadmaproadmap><a href=https://github.com/pingcap/chaos-mesh#roadmap></a>Roadmap</a></li><li><a href=#httpsgithubcompingcapchaos-meshlicenselicense><a href=https://github.com/pingcap/chaos-mesh#license></a>License</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>