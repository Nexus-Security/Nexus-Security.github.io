<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Demikernel The Demikernel is a library operating system architecture designed for use with kernel-bypass I/O devices. The Demikernel architecture offers a uniform system call API across kernel-bypass technologies (e.g., RDMA, DPDK) and OS functionality (e.g., a user-level networking stack for DPDK). Demeter OS is our first Demikernel OS, currently in the prototype stage.
To read more about the motivation behind the Demikernel, check out this blog post.
To get details about the system, read our HotOS paper."><title>Demikernel: A library OS for kernel-bypass devices, now with Rust TCP/IP stack</title><link rel=canonical href=https://Nexus-Security.github.io/posts/2016-09-09-demikernel-library-os-for-kernel-bypass/><link rel=stylesheet href=/scss/style.min.450926226e724574a6b936335ea06111f8aeb253d932c86cb2cc807341cd2889.css><meta property="og:title" content="Demikernel: A library OS for kernel-bypass devices, now with Rust TCP/IP stack"><meta property="og:description" content="Demikernel The Demikernel is a library operating system architecture designed for use with kernel-bypass I/O devices. The Demikernel architecture offers a uniform system call API across kernel-bypass technologies (e.g., RDMA, DPDK) and OS functionality (e.g., a user-level networking stack for DPDK). Demeter OS is our first Demikernel OS, currently in the prototype stage.
To read more about the motivation behind the Demikernel, check out this blog post.
To get details about the system, read our HotOS paper."><meta property="og:url" content="https://Nexus-Security.github.io/posts/2016-09-09-demikernel-library-os-for-kernel-bypass/"><meta property="og:site_name" content="ZYChimne"><meta property="og:type" content="article"><meta property="article:section" content="Posts"><meta property="article:published_time" content="2019-10-19T01:22:00+01:00"><meta property="article:modified_time" content="2019-10-19T01:22:00+01:00"><meta name=twitter:title content="Demikernel: A library OS for kernel-bypass devices, now with Rust TCP/IP stack"><meta name=twitter:description content="Demikernel The Demikernel is a library operating system architecture designed for use with kernel-bypass I/O devices. The Demikernel architecture offers a uniform system call API across kernel-bypass technologies (e.g., RDMA, DPDK) and OS functionality (e.g., a user-level networking stack for DPDK). Demeter OS is our first Demikernel OS, currently in the prototype stage.
To read more about the motivation behind the Demikernel, check out this blog post.
To get details about the system, read our HotOS paper."></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu8b78332b6420dc9affabe23720d11e63_1937019_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>üçá</span></figure><div class=site-meta><h1 class=site-name><a href=/>ZYChimne</a></h1><h2 class=site-description>Computer Science, Wuhan University</h2></div></header><ol class=social-menu><li><a href=https://github.com/ZYChimne target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/ZChimne target=_blank title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/about-me/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About Me</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/posts/2016-09-09-demikernel-library-os-for-kernel-bypass/>Demikernel: A library OS for kernel-bypass devices, now with Rust TCP/IP stack</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Oct 19, 2019</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>3 minute read</time></div></footer></div></header><section class=article-content><p><img src="https://avatars0.githubusercontent.com/u/6912742?s=400&v=4" loading=lazy></p><h1 id=httpsgithubcomiyzhangdemikerneldemikerneldemikernel><a class=link href=https://github.com/iyzhang/demikernel#demikernel target=_blank rel=noopener></a>Demikernel</h1><p>The Demikernel is a library operating system architecture designed for use with kernel-bypass I/O devices. The Demikernel architecture offers a uniform system call API across kernel-bypass technologies (e.g., RDMA, DPDK) and OS functionality (e.g., a user-level networking stack for DPDK). Demeter OS is our first Demikernel OS, currently in the prototype stage.</p><p>To read more about the motivation behind the Demikernel, check out this <a class=link href=http://irenezhang.net/blog/2019/05/21/demikernel.html target=_blank rel=noopener>blog post</a>.</p><p>To get details about the system, read our <a class=link href=http://irenezhang.net//papers/demikernel-hotos19.pdf target=_blank rel=noopener>HotOS paper</a>.</p><h2 id=httpsgithubcomiyzhangdemikernelsource-code-organizationsource-code-organization><a class=link href=https://github.com/iyzhang/demikernel#source-code-organization target=_blank rel=noopener></a>Source-code Organization</h2><p>Application wanting to use the Demikernel/Demeter OS should include header files from <code>include/dmtr</code>. Most of the Demeter libOS code is contained in <code>src/c++/libos</code>. Example applications that work with the Demikernel API are in <code>src/c++/apps/</code> and <code>submodules/redis-*/</code>.</p><ul><li><code>include/dmtr/</code> - Demikernel/Demeter header files</li><li><code>scripts/</code> - scripts for using the Demikernel/Demeter OS<ul><li><code>build/</code> - build scripts</li><li><code>cmake/</code> - cmake build scripts</li><li><code>run/</code> - scripts for running experiments</li><li><code>setup/</code> - scripts for setting up environment to use the Demikernel</li></ul></li><li><code>src/c++/</code> - most of the Demikernel/Demeter libOS code<ul><li><code>apps/</code> - C++ Demikernel example apps<ul><li><code>echo/</code> - A simple multi-client echo server</li></ul></li><li><code>latency/</code> - performance measurement code for measuring latencies of various components</li><li><code>libos/</code> - All Demikernel/Demeter libOS components<ul><li><code>common/</code> - code common to all libOSes regardless of kernel-bypass device. Implements functionality across queues.</li><li><code>lwip/</code> - simple DPDK libOS based on the <a class=link href=https://savannah.nongnu.org/projects/lwip/ target=_blank rel=noopener>lwIP stack</a>.</li><li><code>posix/</code> - libOS without kernel-bypass using the POSIX API and the Linux kernel for I/O</li><li><code>rdma/</code> - RDMA libOS using two-sided operations to implements Demikernel queues</li><li><code>rdmacm-common/</code></li><li><code>spdk</code> - simple libOS that implements a single log file on a SPDK drive. (untested)</li></ul></li></ul></li><li><code>submodules</code> - Demikernel/Demeter external dependencies and example applications<ul><li><code>Heap-Layers/</code> - needed by Hoard</li><li><code>Hoard/</code> - unmodified Hoard memory allocator</li><li><code>HoardRdma</code> - modified version of Hoard that registers all of the heap for RDMA access</li><li><code>dpdk/</code> - version of DPDK used for Demikernel/Demeter</li><li><code>redis-lwip</code> - modified Redis to work with the Demikernel interfaces, set up to compile with lwIP libOS</li><li><code>redis-posix</code> - modified Redis to work with the Demikernel interfaces, set up to compile with POSIX libOS</li><li><code>redis-rdma</code> - modified Redis to work with the Demikernel interfaces, set up to compile with RDMA libOS</li><li><code>redis-vanilla</code> - unmodified version of Redis</li><li><code>spdk</code> - version of SPDK used for spdk libOS</li><li><code>tapir-lwip</code> - version of TAPIR modified to run with Demikernel syscall API, set up to compile with lwIP libOS</li><li><code>tapir-posix</code> - version of TAPIR modified to run with Demikernel syscall API, set up to compile with POSIX libOS</li><li><code>tapir-rdma</code> - version of TAPIR modified to run with Demikernel syscall API, set up to compile with RDMA libOS</li></ul></li></ul><h2 id=httpsgithubcomiyzhangdemikerneldemikernel-syscall-apidemikernel-syscall-api><a class=link href=https://github.com/iyzhang/demikernel#demikernel-syscall-api target=_blank rel=noopener></a>Demikernel Syscall API</h2><p>Refer to <a class=link href=https://github.com/iyzhang/demikernel/blob/master/API.md target=_blank rel=noopener>syscall documentation API.md</a></p><h2 id=httpsgithubcomiyzhangdemikernelbuildingbuilding><a class=link href=https://github.com/iyzhang/demikernel#building target=_blank rel=noopener></a>Building</h2><p>See <a class=link href=https://github.com/iyzhang/demikernel/blob/master/BUILDING.md target=_blank rel=noopener>BUILDING.md</a> for build instructions.</p><h2 id=httpsgithubcomiyzhangdemikernelcode-of-conductcode-of-conduct><a class=link href=https://github.com/iyzhang/demikernel#code-of-conduct target=_blank rel=noopener></a>Code of Conduct</h2><p>This project has adopted the <a class=link href=https://opensource.microsoft.com/codeofconduct/ target=_blank rel=noopener>Microsoft Open Source Code of Conduct</a>. For more information see the <a class=link href=https://opensource.microsoft.com/codeofconduct/faq/ target=_blank rel=noopener>Code of Conduct FAQ</a> or contact <a class=link href=mailto:opencode@microsoft.com>opencode@microsoft.com</a> with any additional questions or comments.</p><h2 id=httpsgithubcomiyzhangdemikernelcontributingcontributing><a class=link href=https://github.com/iyzhang/demikernel#contributing target=_blank rel=noopener></a>Contributing</h2><p>See <a class=link href=https://github.com/iyzhang/demikernel/blob/master/CONTRIBUTING.md target=_blank rel=noopener>CONTRIBUTING.md</a> for details regarding how to contribute to <em>Demikernel</em>.</p><h2 id=httpsgithubcomiyzhangdemikernelusage-statementusage-statement><a class=link href=https://github.com/iyzhang/demikernel#usage-statement target=_blank rel=noopener></a>Usage Statement</h2><p>The Demikernel is prototype code. As such, we provide no guarantees that it will work and you are assuming any risks with using the code. We welcome comments and feedback. Please send any questions or comments to <a class=link href=mailto:irene.zhang@microsoft.com>irene.zhang@microsoft.com</a>. By sending feedback, you are consenting to your feedback being used in the further development of this project.</p><p>from Hacker News <a class=link href=https://ift.tt/2MSyZgj target=_blank rel=noopener>https://ift.tt/2MSyZgj</a></p></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><footer class=site-footer><section class=copyright>&copy;
2020 -
2022 ZYChimne</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.11.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#httpsgithubcomiyzhangdemikernelsource-code-organizationsource-code-organization><a href=https://github.com/iyzhang/demikernel#source-code-organization></a>Source-code Organization</a></li><li><a href=#httpsgithubcomiyzhangdemikerneldemikernel-syscall-apidemikernel-syscall-api><a href=https://github.com/iyzhang/demikernel#demikernel-syscall-api></a>Demikernel Syscall API</a></li><li><a href=#httpsgithubcomiyzhangdemikernelbuildingbuilding><a href=https://github.com/iyzhang/demikernel#building></a>Building</a></li><li><a href=#httpsgithubcomiyzhangdemikernelcode-of-conductcode-of-conduct><a href=https://github.com/iyzhang/demikernel#code-of-conduct></a>Code of Conduct</a></li><li><a href=#httpsgithubcomiyzhangdemikernelcontributingcontributing><a href=https://github.com/iyzhang/demikernel#contributing></a>Contributing</a></li><li><a href=#httpsgithubcomiyzhangdemikernelusage-statementusage-statement><a href=https://github.com/iyzhang/demikernel#usage-statement></a>Usage Statement</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>